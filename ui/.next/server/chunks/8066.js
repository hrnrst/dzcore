"use strict";exports.id=8066,exports.ids=[8066],exports.modules={96490:(e,t,s)=>{s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(45711).Z)("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},9321:(e,t,s)=>{s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(45711).Z)("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]])},18066:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>J});var i=s(20997),n=s(96463),r=s(69915),l=s(96752),o=s.n(l),c=s(76789),d=s(9321),x=s(96490),h=s(41664),m=s.n(h),f=s(56368),p=s.n(f),u=s(16689),g=s(57987),j=s(87249),y=s(19681),v=s(32676),b=s(49827),N=s(87776),k=s(53830),_=s(57259),w=s(44309),z=e([n,r,g,j,y,v,b,N,k,_]);function J(){let{sendNotification:e}=(0,w.lm)(),t=(0,y.x)(),{t:s,i18n:a}=(0,g.useTranslation)("common"),l=new Audio("/assets/sound/notification.mp3"),[h,f]=(0,u.useState)([]),z=async e=>{setTimeout(()=>{e.forEach(e=>{e.seen_at||n.dJ.post("/notifications/seen",{notification_id:e.notification_id})})},1e3)};(0,u.useEffect)(()=>{let t=r.default.get("currentUser"),s=[];n.dJ.get("/notifications/unread").then(t=>{s=t.data,f(t.data),JSON.parse(JSON.stringify(s)).reverse().forEach(t=>{t.seen_at||e(t)}),z(s)});let a=new(o())({broadcaster:"pusher",key:"liman-key",cluster:"eu",wsHost:window.location.host,wssPort:443,disableStats:!0,encrypted:!0,enabledTransports:["ws","wss"],disabledTransports:["sockjs","xhr_polling","xhr_streaming"],authEndpoint:"/api/broadcasting/auth",auth:{headers:{Accept:"application/json"}},pusher:p()});return a.private(`App.Models.User.${JSON.parse(t).user.id}`).notification(t=>{f([t,...s]),s=JSON.parse(JSON.stringify([t,...s])),l.play(),e(t),z([t])}),()=>{a.leave(`App.Models.User.${JSON.parse(t).user.id}`),a.disconnect()}},[]);let J=()=>{n.dJ.post("/notifications/read").then(()=>{f([])})};return(0,i.jsxs)(N.h_,{children:[i.jsx(N.$F,{asChild:!0,children:(0,i.jsxs)("div",{className:(0,v.cn)((0,j.d)({size:"sm",variant:"ghost"}),"relative"),children:[i.jsx(c.Z,{className:"size-5"}),i.jsx("span",{className:"sr-only",children:"Notifications"}),h.filter(e=>!e.seen_at).length>0&&i.jsx(b.C,{className:"absolute right-0 top-0 rounded-full px-[4px] py-[2px] text-[11px] leading-[11px]",children:h.filter(e=>!e.seen_at).length})]})}),(0,i.jsxs)(N.AW,{className:"mr-5 w-[500px]",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between p-4",children:[i.jsx("h3",{className:"text-lg font-semibold tracking-tight",children:s("notifications.title")}),(0,i.jsxs)(j.z,{variant:"ghost",size:"sm",className:"-mr-2 text-sm text-blue-500",disabled:0===h.length,onClick:()=>J(),children:[i.jsx(d.Z,{className:"mr-2 size-5"})," ",s("notifications.mark_all_as_read")]})]}),i.jsx(k.x,{type:"always",className:"flex flex-col gap-3 p-2 h-[350px]",children:h.map(e=>i.jsx(m(),{href:`/notifications#notification-${e.notification_id}`,children:(0,i.jsxs)("div",{className:"relative flex flex-col gap-1 rounded p-2 transition-all hover:bg-accent/50 hover:text-accent-foreground",children:[i.jsx("h3",{className:"text-[15px] font-semibold tracking-tight",children:e.title}),i.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:e.content}),i.jsx("div",{className:"absolute right-2 top-1",children:i.jsx(_.Z,{status:e.level})}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"text-xs text-slate-700 dark:text-slate-400",children:new Date(e.send_at).toLocaleDateString(a.language,{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}),i.jsx("span",{className:"text-xs text-slate-500",children:e.send_at_humanized})]})]})},e.notification_id))}),0===h.length&&i.jsx(i.Fragment,{children:(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center p-2 py-8",children:[i.jsx(x.Z,{className:"mb-5 size-8 text-slate-800 dark:text-slate-300"}),i.jsx("h3",{className:"text-md mb-1 font-semibold tracking-tight",children:s("notifications.empty")}),i.jsx("p",{className:"mb-[3px] text-sm text-slate-700 dark:text-slate-300",children:s("notifications.empty_message")})]})}),i.jsx(N.VD,{}),(0,i.jsxs)("div",{className:"flex items-center justify-between p-3",children:[1===t.status?i.jsx(m(),{href:"/settings/external_notifications",children:i.jsx(j.z,{size:"sm",variant:"ghost",className:"-ml-1 text-muted-foreground",children:s("notifications.manage")})}):i.jsx("div",{}),i.jsx(m(),{href:"/notifications",children:i.jsx(j.z,{size:"sm",className:"rounded-[8px]",children:s("notifications.show_all")})})]})]})]})}[n,r,g,j,y,v,b,N,k,_]=z.then?(await z)():z,a()}catch(e){a(e)}})},49827:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{C:()=>o});var i=s(20997);s(16689);var n=s(16926),r=s(32676),l=e([n,r]);[n,r]=l.then?(await l)():l;let c=(0,n.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",success:"border-transparent bg-green-500 text-white hover:bg-green-500/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t,...s}){return i.jsx("div",{className:(0,r.cn)(c({variant:t}),e),...s})}a()}catch(e){a(e)}})}};