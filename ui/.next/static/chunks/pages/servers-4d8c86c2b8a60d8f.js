(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[745],{9404:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(5711).Z)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},6609:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(5711).Z)("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]])},7235:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(5711).Z)("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]])},2448:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(5711).Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]])},3671:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t(5711).Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},3318:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/servers",function(){return t(3381)}])},2297:function(e,s,t){"use strict";t.d(s,{_:function(){return d}});var n=t(5893),r=t(7294),i=t(9102),a=t(5139),c=t(7327);let l=(0,a.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,n.jsx)(i.f,{ref:s,className:(0,c.cn)(l(),t),...r})});d.displayName=i.f.displayName},986:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});var n=t(5893),r=t(9008),i=t.n(r);function a(e){let{title:s,description:t,rightSide:r}=e;return(0,n.jsxs)("div",{className:"flex-1 flex-col p-8 md:flex",children:[(0,n.jsx)(i(),{children:(0,n.jsx)("title",{children:"".concat(s," | DZ")})}),(0,n.jsxs)("div",{className:"flex items-center justify-between space-y-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:s}),(0,n.jsx)("p",{className:"text-muted-foreground",children:t})]}),r&&(0,n.jsx)("div",{className:"flex items-center",children:r})]})]})}},1250:function(e,s,t){"use strict";t.d(s,{r:function(){return k}});var n=t(5893),r=t(7294),i=t(7462),a=t(6206),c=t(8771),l=t(5360),d=t(7342),o=t(7898),u=t(7546),f=t(5320);let h="Switch",[m,x]=(0,l.b)(h),[p,v]=m(h),j=(0,r.forwardRef)((e,s)=>{let{__scopeSwitch:t,name:n,checked:l,defaultChecked:o,required:u,disabled:h,value:m="on",onCheckedChange:x,...v}=e,[j,g]=(0,r.useState)(null),y=(0,c.e)(s,e=>g(e)),k=(0,r.useRef)(!1),w=!j||!!j.closest("form"),[N=!1,E]=(0,d.T)({prop:l,defaultProp:o,onChange:x});return(0,r.createElement)(p,{scope:t,checked:N,disabled:h},(0,r.createElement)(f.WV.button,(0,i.Z)({type:"button",role:"switch","aria-checked":N,"aria-required":u,"data-state":_(N),"data-disabled":h?"":void 0,disabled:h,value:m},v,{ref:y,onClick:(0,a.M)(e.onClick,e=>{E(e=>!e),w&&(k.current=e.isPropagationStopped(),k.current||e.stopPropagation())})})),w&&(0,r.createElement)(b,{control:j,bubbles:!k.current,name:n,value:m,checked:N,required:u,disabled:h,style:{transform:"translateX(-100%)"}}))}),g=(0,r.forwardRef)((e,s)=>{let{__scopeSwitch:t,...n}=e,a=v("SwitchThumb",t);return(0,r.createElement)(f.WV.span,(0,i.Z)({"data-state":_(a.checked),"data-disabled":a.disabled?"":void 0},n,{ref:s}))}),b=e=>{let{control:s,checked:t,bubbles:n=!0,...a}=e,c=(0,r.useRef)(null),l=(0,o.D)(t),d=(0,u.t)(s);return(0,r.useEffect)(()=>{let e=c.current,s=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(l!==t&&s){let r=new Event("click",{bubbles:n});s.call(e,t),e.dispatchEvent(r)}},[l,t,n]),(0,r.createElement)("input",(0,i.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:t},a,{tabIndex:-1,ref:c,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function _(e){return e?"checked":"unchecked"}var y=t(7327);let k=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,n.jsx)(j,{className:(0,y.cn)("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...r,ref:s,children:(0,n.jsx)(g,{className:(0,y.cn)("pointer-events-none block size-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});k.displayName=j.displayName},5050:function(e,s,t){"use strict";t.d(s,{p:function(){return i}}),t(7294);var n=t(7421),r=t(4712);function i(){let{t:e}=(0,n.$G)("common");return{toast:s=>{let{title:t,description:n,variant:i}=s,a={description:n,duration:6e3,dismissible:!0},c="";switch(t==e("information")?c="info":t==e("success")?c="success":t==e("error")?c="error":t==e("warning")&&(c="warning"),i&&(c=i),c){case"success":return r.A.success(t,a);case"error":case"destructive":return r.A.error(t,a);case"warning":return r.A.warning(t,a);case"info":return r.A.info(t,a);default:return(0,r.A)(t,a)}}}}},8946:function(e,s,t){"use strict";t.d(s,{q:function(){return r}});let n=(0,t(9391).Z)(),r=()=>n},3381:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return M}});var n=t(5893),r=t(9774),i=t(7235),a=t(443),c=t(1664),l=t.n(c),d=t(7294),o=t(7421),u=t(6660),f=t(9404),h=t(2448),m=t(3671),x=t(6609),p=t(9681),v=t(8946),j=t(2361),g=t(7249),b=t(7776),_=t(7622),y=t(733),k=t(5037),w=t(2297),N=t(1250),E=t(5050);function S(e){let{row:s}=e,t=s.original,r=(0,p.x)(),[i,a]=(0,d.useState)(!1),[c,l]=(0,d.useState)(!1),{t:u}=(0,o.$G)("settings");return r.permissions.update_server&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(b.h_,{children:[(0,n.jsx)(b.$F,{asChild:!0,children:(0,n.jsxs)(g.z,{variant:"ghost",className:"flex size-5 p-0 data-[state=open]:bg-muted",children:[(0,n.jsx)(f.Z,{className:"size-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,n.jsxs)(b.AW,{align:"end",className:"w-[160px]",children:[(0,n.jsxs)(b.Xi,{onClick:()=>l(!0),children:[(0,n.jsx)(h.Z,{className:"mr-2 size-3.5"}),u("servers.actions.edit_btn")]}),(0,n.jsx)(b.VD,{}),(0,n.jsxs)(b.Xi,{onClick:()=>a(!0),children:[(0,n.jsx)(m.Z,{className:"mr-2 size-3.5"}),u("servers.actions.delete")]})]})]}),(0,n.jsx)(C,{open:i,setOpen:a,server:t}),(0,n.jsx)(Z,{open:c,setOpen:l,server:t})]})}function Z(e){let{open:s,setOpen:t,server:i}=e,a=(0,v.q)(),{toast:c}=(0,E.p)(),[l,f]=(0,d.useState)(!1),[m,p]=(0,d.useState)(i.name),[j,b]=(0,d.useState)(i.ip_address),[S,Z]=(0,d.useState)(i.shared_key),{t:C}=(0,o.$G)("settings"),R=(0,u.S)(),z=()=>{f(!0),r.dJ.patch("/servers/".concat(i.id),{name:m,ip_address:j,shared_key:S}).then(()=>{c({title:C("success"),description:C("servers.actions.edit.success_msg")}),a.emit("REFETCH_SERVERS"),R.refreshServers(),t(!1)}).catch(()=>{c({title:C("error"),description:C("servers.actions.edit.error_msg"),variant:"destructive"})}).finally(()=>{f(!1)})};return(0,n.jsx)(_.Vq,{onOpenChange:e=>t(e),open:s,children:(0,n.jsxs)(_.cZ,{className:"sm:max-w-[525px]",children:[(0,n.jsxs)(_.fK,{children:[(0,n.jsx)(_.$N,{children:C("servers.actions.edit.title")}),(0,n.jsx)(_.Be,{children:C("servers.actions.edit.description")})]}),(0,n.jsxs)("div",{className:"mt-3 grid w-full items-center gap-1.5",children:[(0,n.jsx)(w._,{htmlFor:"edit",children:C("servers.actions.edit.form.name")}),(0,n.jsx)(k.I,{id:"name",onChange:e=>p(e.target.value),value:m})]}),(0,n.jsxs)("div",{className:"mt-3 grid w-full items-center gap-1.5",children:[(0,n.jsx)(w._,{htmlFor:"edit",children:C("servers.actions.edit.form.ip_address")}),(0,n.jsx)(k.I,{id:"ip_address",onChange:e=>b(e.target.value),value:j})]}),(0,n.jsx)("div",{className:"mt-3 grid w-full items-center gap-1.5",children:(0,n.jsxs)("div",{className:"flex flex-row items-center justify-between rounded-lg border p-4 shadow-sm",children:[(0,n.jsxs)("div",{className:"flex space-x-3 space-y-0.5",children:[(0,n.jsx)(x.Z,{className:"size-6 text-muted-foreground"}),(0,n.jsxs)("div",{className:"flex flex-col space-y-0.5",children:[(0,n.jsx)(w._,{children:C("servers.actions.edit.form.shared_key")}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:C("servers.actions.edit.form.shared_key_message")})]})]}),(0,n.jsx)(N.r,{id:"shared_key",checked:1==S,onCheckedChange:()=>Z(1==S?0:1)})]})}),(0,n.jsxs)("div",{className:"mt-6 flex justify-end",children:[(0,n.jsx)(g.z,{variant:"outline",onClick:()=>t(!1),className:"mr-2",children:C("servers.actions.edit.form.cancel")}),(0,n.jsxs)(g.z,{disabled:l,onClick:()=>z(),children:[l?(0,n.jsx)(y.P.spinner,{className:"mr-2 size-4 animate-spin"}):(0,n.jsx)(h.Z,{className:"mr-2 size-4"}),C("servers.actions.edit.form.submit")]})]})]})})}function C(e){let{open:s,setOpen:t,server:i}=e,a=(0,v.q)(),{toast:c}=(0,E.p)(),[l,f]=(0,d.useState)(!1),{t:h}=(0,o.$G)("settings"),m=(0,u.S)(),x=()=>{f(!0),r.dJ.delete("/servers/".concat(i.id)).then(()=>{c({title:h("success"),description:h("servers.actions.delete_dialog.success_msg")}),a.emit("REFETCH_SERVERS"),m.refreshServers(),t(!1)}).catch(()=>{c({title:h("error"),description:h("servers.actions.delete_dialog.error_msg"),variant:"destructive"})}).finally(()=>{f(!1)})};return(0,n.jsx)(j.aR,{open:s,onOpenChange:e=>t(e),children:(0,n.jsxs)(j._T,{children:[(0,n.jsxs)(j.fY,{children:[(0,n.jsx)(j.f$,{children:h("servers.actions.delete_dialog.title")}),(0,n.jsx)(j.yT,{children:(0,n.jsx)("span",{dangerouslySetInnerHTML:{__html:h("servers.actions.delete_dialog.description",{server:i.name})}})})]}),(0,n.jsxs)(j.xo,{children:[(0,n.jsx)(j.le,{children:h("servers.actions.delete_dialog.cancel")}),(0,n.jsxs)(j.OL,{onClick:()=>x(),children:[l&&(0,n.jsx)(y.P.spinner,{className:"size-4 animate-spin"}),h("servers.actions.delete_dialog.delete")]})]})]})})}var R=t(5282),z=t(2532),T=t(986),q=t(7327);function M(){let[e,s]=(0,d.useState)(!0),[t,c]=(0,d.useState)([]),u=(0,p.x)(),f=(0,v.q)(),{t:h}=(0,o.$G)("servers"),m=[{accessorKey:"name",header:e=>{let{column:s}=e;return(0,n.jsx)(z.p,{column:s,title:h("index.table.name")})},title:h("index.table.name"),enableSorting:!0,enableHiding:!0,cell:e=>{let{row:s}=e;return u.permissions.server_details&&"none"!=s.original.type?(0,n.jsxs)(l(),{href:"/servers/".concat(s.original.id),children:[s.original.name,(0,n.jsx)(i.Z,{className:"ml-2 inline-block size-4"})]}):s.original.name}},{accessorKey:"ip_address",header:e=>{let{column:s}=e;return(0,n.jsx)(z.p,{column:s,title:h("index.table.ip_address")})},title:h("index.table.ip_address")},{accessorKey:"control_port",header:e=>{let{column:s}=e;return(0,n.jsx)(z.p,{column:s,title:h("index.table.port")})},title:h("index.table.port")},{accessorKey:"extension_count",header:e=>{let{column:s}=e;return(0,n.jsx)(z.p,{column:s,title:h("index.table.extension_count")})},title:h("index.table.extension_count"),sortingFn:q.aS,filterFn:"weakEquals"},{id:"actions",cell:e=>{let{row:s}=e;return(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)(S,{row:s})})}}];return(0,d.useEffect)(()=>(s(!0),r.dJ.get("/servers").then(e=>{c(e.data),s(!1)}),f.on("REFETCH_SERVERS",()=>{s(!0),r.dJ.get("/servers").then(e=>{c(e.data),s(!1)})}),()=>{f.off("REFETCH_SERVERS")}),[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(T.Z,{title:h("index.title"),description:h("index.description"),rightSide:u.permissions.add_server&&(0,n.jsx)(l(),{href:"/servers/create",children:(0,n.jsxs)(g.z,{className:"rounded-full",children:[(0,n.jsx)(a.Z,{className:"mr-2 size-4"}),h("index.create")]})})}),(0,n.jsx)(R.Z,{columns:m,data:t,loading:e})]})}},9102:function(e,s,t){"use strict";t.d(s,{f:function(){return a}});var n=t(7462),r=t(7294),i=t(5320);let a=(0,r.forwardRef)((e,s)=>(0,r.createElement)(i.WV.label,(0,n.Z)({},e,{ref:s,onMouseDown:s=>{var t;null===(t=e.onMouseDown)||void 0===t||t.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault()}})))},9391:function(e,s,t){"use strict";function n(e){return{all:e=e||new Map,on:function(s,t){var n=e.get(s);n?n.push(t):e.set(s,[t])},off:function(s,t){var n=e.get(s);n&&(t?n.splice(n.indexOf(t)>>>0,1):e.set(s,[]))},emit:function(s,t){var n=e.get(s);n&&n.slice().map(function(e){e(t)}),(n=e.get("*"))&&n.slice().map(function(e){e(s,t)})}}}t.d(s,{Z:function(){return n}})}},function(e){e.O(0,[5059,3265,5855,2888,9774,179],function(){return e(e.s=3318)}),_N_E=e.O()}]);