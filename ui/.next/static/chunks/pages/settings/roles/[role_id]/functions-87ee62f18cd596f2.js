(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[280],{2536:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(5711).Z)("CircleMinus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]])},1325:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(5711).Z)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},4464:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(5711).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8912:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(5711).Z)("SquareFunction",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M9 17c2 0 2.8-1 2.8-2.8V10c0-2 1-3.3 3.2-3",key:"m1af9g"}],["path",{d:"M9 11.2h5.7",key:"3zgcl2"}]])},6164:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(5711).Z)("Text",[["path",{d:"M17 6.1H3",key:"wptmhv"}],["path",{d:"M21 12.1H3",key:"1j38uz"}],["path",{d:"M15.1 18H3",key:"1nb16a"}]])},4683:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/roles/[role_id]/functions",function(){return s(1778)}])},3559:function(e,t,s){"use strict";s.d(t,{Z:function(){return N}});var n=s(5893),r=s(9774),i=s(3125),a=s(443),l=s(5854),o=s(8912),c=s(4464),d=s(6164),u=s(8814),f=s(1163),m=s(7294),x=s(7421),h=s(1664),p=s.n(h),g=s(7327),y=s(9827);function j(e){let t=(0,f.useRouter)();return(0,n.jsx)(p(),{href:e.href,children:(0,n.jsxs)("div",{className:(0,g.cn)("flex w-full gap-6 border-b p-6",t.asPath.includes(e.href)&&"bg-secondary/50 dark:bg-secondary/5"),children:[(0,n.jsx)("div",{className:"icon self-start rounded-md bg-secondary p-3 dark:bg-secondary/10",children:(0,n.jsx)(e.icon,{className:"size-5 text-secondary-foreground/70 dark:text-white/70"})}),(0,n.jsxs)("div",{className:"content w-full",children:[(0,n.jsxs)("div",{className:"mb-1 flex justify-between",children:[(0,n.jsx)("h3",{className:"font-semibold tracking-tight",children:e.title}),(0,n.jsx)(y.C,{variant:"secondary",children:e.count})]}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:e.description})]})]})})}var v=s(733),b=s(8946);function N(e){let{children:t}=e,s=(0,f.useRouter)(),h=(0,b.q)(),{t:p}=(0,x.$G)("settings"),g=[{id:"users",icon:i.Z,title:p("roles.users.title"),description:p("roles.users.description"),href:"/settings/roles/".concat(s.query.role_id,"/users")},{id:"liman",icon:v.P.dugumluLogo,title:p("roles.liman.title"),description:p("roles.liman.description"),href:"/settings/roles/".concat(s.query.role_id,"/liman")},{id:"servers",icon:a.Z,title:p("roles.servers.title"),description:p("roles.servers.description"),href:"/settings/roles/".concat(s.query.role_id,"/servers")},{id:"extensions",icon:l.Z,title:p("roles.extensions.title"),description:p("roles.extensions.description"),href:"/settings/roles/".concat(s.query.role_id,"/extensions")},{id:"functions",icon:o.Z,title:p("roles.functions.title"),description:p("roles.functions.description"),href:"/settings/roles/".concat(s.query.role_id,"/functions")},{id:"views",icon:c.Z,title:p("roles.views.title"),description:p("roles.views.description"),href:"/settings/roles/".concat(s.query.role_id,"/views")},{id:"variables",icon:d.Z,title:p("roles.variables.title"),description:p("roles.variables.description"),href:"/settings/roles/".concat(s.query.role_id,"/variables")}],[y,N]=(0,m.useState)(),k=e=>{r.dJ.get("/settings/roles/".concat(e||s.query.role_id)).then(e=>{N(e.data)})};return(0,m.useEffect)(()=>{s.query.role_id&&k()},[s.query.role_id]),(0,m.useEffect)(()=>(h.on("REFETCH_ROLE",e=>{k(e)}),()=>h.off("REFETCH_ROLE")),[]),(0,n.jsxs)("div",{className:"grid grid-cols-4",style:{height:"var(--container-height)"},children:[(0,n.jsxs)("div",{className:"col-span-1 border-r",children:[(0,n.jsxs)("div",{className:"flex items-center border-b px-8 py-6 pt-7 text-2xl font-bold",children:[(0,n.jsx)(u.Z,{onClick:()=>s.push("/settings/roles"),className:"mr-2 size-6 cursor-pointer"}),y&&y.name," ",p("roles.role")]}),g.map(e=>(0,n.jsx)(j,{title:e.title,description:e.description,icon:e.icon,href:e.href,count:y?y.counts[e.id]:0},e.id))]}),(0,n.jsx)("div",{className:"col-span-3",children:t})]})}},7576:function(e,t,s){"use strict";s.d(t,{y:function(){return h}});var n=s(5893),r=s(7294),i=s(9774),a=s(5854),l=s(4958),o=s(3742),c=s(7327),d=s(7249),u=s(8367),f=s(1310),m=s(733),x=s(1956);function h(e){var t,s;let{defaultValue:h,onValueChange:p,endpoint:g}=e,[y,j]=r.useState(!1),[v,b]=r.useState(""),[N,k]=r.useState([]),[w,_]=r.useState(!0);return r.useEffect(()=>{i.dJ.get(g||"/extensions").then(e=>{if(e.data.selected){k(e.data.selected),h||b(e.data.selected&&e.data.selected.length&&e.data.selected[0].id);return}k(e.data)}).finally(()=>{_(!1)})},[]),r.useEffect(()=>{h&&b(h)},[h]),r.useEffect(()=>{p(v)},[v]),(0,n.jsxs)(f.J2,{open:y,onOpenChange:j,children:[(0,n.jsx)(f.xo,{asChild:!0,children:(0,n.jsxs)(d.z,{variant:"outline",role:"combobox","aria-expanded":y,className:"w-full justify-between px-3 font-normal",disabled:w,children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(a.Z,{className:"size-4 shrink-0"}),v?(null===(t=N.find(e=>e.id===v))||void 0===t?void 0:t.display_name)||(null===(s=N.find(e=>e.id===v))||void 0===s?void 0:s.name):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("span",{className:"text-muted-foreground",children:"Eklenti se\xe7iniz..."})})]}),!w&&(0,n.jsx)(l.Z,{className:"ml-2 size-4 shrink-0 opacity-50"}),w&&(0,n.jsx)(m.P.spinner,{className:"ml-2 size-4 shrink-0 animate-spin opacity-50"})]})}),(0,n.jsx)(f.yk,{className:"w-[var(--radix-popover-trigger-width)] p-0",children:(0,n.jsxs)(u.mY,{children:[(0,n.jsx)(u.sZ,{placeholder:"Eklenti ara..."}),(0,n.jsx)(u.rb,{children:"Eklenti bulunamadÄ±."}),(0,n.jsx)(u.e8,{children:(0,n.jsx)(u.fu,{children:(0,n.jsx)(x.x,{className:"h-[350px]",children:N.map(e=>(0,n.jsxs)(u.di,{onSelect:()=>{b(e.id===v?"":e.id),j(!1)},children:[(0,n.jsx)(o.Z,{className:(0,c.cn)("mr-2 size-4",v===e.id?"opacity-100":"opacity-0")}),e.display_name||e.name]},e.id))})})})]})})]})}},9827:function(e,t,s){"use strict";s.d(t,{C:function(){return l}});var n=s(5893);s(7294);var r=s(5139),i=s(7327);let a=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",success:"border-transparent bg-green-500 text-white hover:bg-green-500/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:s,...r}=e;return(0,n.jsx)("div",{className:(0,i.cn)(a({variant:s}),t),...r})}},1648:function(e,t,s){"use strict";s.d(t,{X:function(){return o}});var n=s(5893),r=s(7294),i=s(6069),a=s(3742),l=s(7327);let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)(i.fC,{ref:t,className:(0,l.cn)("peer size-4 shrink-0 overflow-hidden rounded-full border border-primary ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary/75 data-[state=checked]:text-primary-foreground",s),...r,children:(0,n.jsx)(i.z$,{className:(0,l.cn)("flex items-center justify-center rounded-full text-current"),children:(0,n.jsx)(a.Z,{className:"size-full"})})})});o.displayName=i.fC.displayName},2297:function(e,t,s){"use strict";s.d(t,{_:function(){return c}});var n=s(5893),r=s(7294),i=s(9102),a=s(5139),l=s(7327);let o=(0,a.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)(i.f,{ref:t,className:(0,l.cn)(o(),s),...r})});c.displayName=i.f.displayName},986:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var n=s(5893),r=s(9008),i=s.n(r);function a(e){let{title:t,description:s,rightSide:r}=e;return(0,n.jsxs)("div",{className:"flex-1 flex-col p-8 md:flex",children:[(0,n.jsx)(i(),{children:(0,n.jsx)("title",{children:"".concat(t," | DZ")})}),(0,n.jsxs)("div",{className:"flex items-center justify-between space-y-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:t}),(0,n.jsx)("p",{className:"text-muted-foreground",children:s})]}),r&&(0,n.jsx)("div",{className:"flex items-center",children:r})]})]})}},1310:function(e,t,s){"use strict";s.d(t,{J2:function(){return l},xo:function(){return o},yk:function(){return c}});var n=s(5893),r=s(7294),i=s(6419),a=s(7327);let l=i.fC,o=i.xz,c=r.forwardRef((e,t)=>{let{className:s,align:r="center",sideOffset:l=4,...o}=e;return(0,n.jsx)(i.h_,{children:(0,n.jsx)(i.VY,{ref:t,align:r,sideOffset:l,className:(0,a.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...o})})});c.displayName=i.VY.displayName},4210:function(e,t,s){"use strict";s.d(t,{Ei:function(){return j},FF:function(){return g},Tu:function(){return p},aM:function(){return d},bC:function(){return y},sw:function(){return u},ue:function(){return h},yo:function(){return c}});var n=s(5893),r=s(7294),i=s(2854),a=s(5139),l=s(1352),o=s(7327);let c=i.fC,d=i.xz,u=i.x8,f=e=>{let{className:t,...s}=e;return(0,n.jsx)(i.h_,{className:(0,o.cn)(t),...s})};f.displayName=i.h_.displayName;let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("div",{className:(0,o.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:t})});m.displayName=i.aV.displayName;let x=(0,a.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500 overflow-y-auto",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),h=r.forwardRef((e,t)=>{let{side:s="right",className:r,children:a,...c}=e;return(0,n.jsxs)(f,{children:[(0,n.jsx)(m,{}),(0,n.jsxs)(i.VY,{ref:t,className:(0,o.cn)(x({side:s}),r),...c,children:[a,(0,n.jsxs)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,n.jsx)(l.Z,{className:"size-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=i.VY.displayName;let p=e=>{let{className:t,...s}=e;return(0,n.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};p.displayName="SheetHeader";let g=e=>{let{className:t,...s}=e;return(0,n.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};g.displayName="SheetFooter";let y=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)(i.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold text-foreground",s),...r})});y.displayName=i.Dx.displayName;let j=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)(i.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",s),...r})});j.displayName=i.dk.displayName},5050:function(e,t,s){"use strict";s.d(t,{p:function(){return i}}),s(7294);var n=s(7421),r=s(4712);function i(){let{t:e}=(0,n.$G)("common");return{toast:t=>{let{title:s,description:n,variant:i}=t,a={description:n,duration:6e3,dismissible:!0},l="";switch(s==e("information")?l="info":s==e("success")?l="success":s==e("error")?l="error":s==e("warning")&&(l="warning"),i&&(l=i),l){case"success":return r.A.success(s,a);case"error":case"destructive":return r.A.error(s,a);case"warning":return r.A.warning(s,a);case"info":return r.A.info(s,a);default:return(0,r.A)(s,a)}}}}},8946:function(e,t,s){"use strict";s.d(t,{q:function(){return r}});let n=(0,s(9391).Z)(),r=()=>n},1778:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return F}});var n=s(5893),r=s(9774),i=s(2536),a=s(1163),l=s(7294),o=s(7421),c=s(3559),d=s(1325),u=s(8946),f=s(7249),m=s(1648),x=s(5282),h=s(2532),p=s(2297),g=s(4210),y=s(5050),j=s(7576);function v(){let e=(0,a.useRouter)(),t=(0,u.q)(),{t:s}=(0,o.$G)("settings"),{toast:i}=(0,y.p)(),[c,v]=(0,l.useState)(!0),[b,N]=(0,l.useState)([]),[k,w]=(0,l.useState)(),[_,C]=(0,l.useState)([]),E=e=>{e&&(v(!0),w(e),r.dJ.get("/settings/extensions/".concat(e,"/functions")).then(e=>{N(e.data)}).finally(()=>{v(!1),C([])}))},Z=[{id:"select",header:e=>{let{table:t}=e;return(0,n.jsx)(m.X,{checked:t.getIsAllPageRowsSelected(),onCheckedChange:e=>t.toggleAllPageRowsSelected(!!e),"aria-label":"Select all",className:"translate-y-[2px]"})},cell:e=>{let{row:t}=e;return(0,n.jsx)(m.X,{checked:t.getIsSelected(),onCheckedChange:e=>t.toggleSelected(!!e),"aria-label":"Select row",className:"translate-y-[2px]"})},enableSorting:!1,enableHiding:!1},{accessorKey:"description",header:e=>{let{column:t}=e;return(0,n.jsx)(h.p,{column:t,title:s("roles.functions.assign.permission")})},title:s("roles.functions.assign.permission")}],S=()=>{r.dJ.post("/settings/roles/".concat(e.query.role_id,"/functions"),{functions:_.map(e=>e.name),extension_id:k}).then(()=>{i({title:s("success"),description:s("roles.functions.assign.success")}),t.emit("REFETCH_FUNCTIONS",e.query.role_id),t.emit("REFETCH_ROLE",e.query.role_id)}).catch(()=>{i({title:s("error"),description:s("roles.functions.assign.error"),variant:"destructive"})})};return(0,n.jsxs)(g.yo,{children:[(0,n.jsx)(g.aM,{asChild:!0,children:(0,n.jsxs)(f.z,{variant:"outline",size:"sm",className:"ml-auto h-8 lg:flex",children:[(0,n.jsx)(d.Z,{className:"mr-2 size-4"}),s("roles.functions.assign.add")]})}),(0,n.jsxs)(g.ue,{side:"right",className:"sm:w-[800px] sm:max-w-full",children:[(0,n.jsxs)(g.Tu,{children:[(0,n.jsx)(g.bC,{children:s("roles.functions.assign.title")}),(0,n.jsx)(g.Ei,{children:s("roles.functions.assign.description")})]}),(0,n.jsxs)("div",{className:"mt-5 flex flex-col gap-3",children:[(0,n.jsx)(p._,{children:s("roles.functions.assign.extension_selection")}),(0,n.jsx)(j.y,{onValueChange:e=>E(e),endpoint:"/settings/roles/".concat(e.query.role_id,"/extensions")})]}),(0,n.jsx)("div",{className:"-mx-6 my-8",children:(0,n.jsx)(x.Z,{columns:Z,data:b,loading:c,selectable:!0,onSelectedRowsChange:e=>C(e)})}),(0,n.jsx)(g.FF,{children:(0,n.jsx)(g.sw,{asChild:!0,children:(0,n.jsxs)(f.z,{type:"submit",className:"rounded-full",onClick:()=>S(),children:[(0,n.jsx)(d.Z,{className:"mr-2 size-4"})," ",s("roles.functions.assign.add")]})})})]})]})}var b=s(93),N=s(3225),k=s(4958),w=s(1607),_=s(7327),C=s(7776),E=s(1956),Z=s(4462);function S(e){let{column:t,title:s,className:r,extensions:i}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:(0,_.cn)("mt-1 flex items-center space-x-2",r),children:(0,n.jsxs)(C.h_,{children:[(0,n.jsx)(C.$F,{children:(0,n.jsxs)("div",{className:"flex h-8 items-center justify-center data-[state=open]:bg-accent data-[state=open]:text-white",children:[(0,n.jsx)("span",{children:s}),"desc"===t.getIsSorted()?(0,n.jsx)(b.Z,{className:"ml-2 size-4"}):"asc"===t.getIsSorted()?(0,n.jsx)(N.Z,{className:"ml-2 size-4"}):(0,n.jsx)(k.Z,{className:"ml-2 size-4"})]})}),(0,n.jsxs)(C.AW,{align:"start",children:[(0,n.jsxs)(C.Xi,{onClick:()=>t.toggleSorting(!1),children:[(0,n.jsx)(N.Z,{className:"mr-2 size-3.5"}),"Artan"]}),(0,n.jsxs)(C.Xi,{onClick:()=>t.toggleSorting(!0),children:[(0,n.jsx)(b.Z,{className:"mr-2 size-3.5"}),"Azalan"]}),(0,n.jsx)(C.VD,{}),(0,n.jsxs)(C.Xi,{onClick:()=>t.toggleVisibility(!1),children:[(0,n.jsx)(w.Z,{className:"mr-2 size-3.5"}),"Gizle"]})]})]})}),(0,n.jsxs)(Z.Ph,{onValueChange:e=>t.setFilterValue(e),value:t.getFilterValue()||" ",defaultValue:" ",children:[(0,n.jsx)(Z.i4,{className:"mb-3 h-8 w-full ",children:(0,n.jsx)(Z.ki,{placeholder:"Eklentiye g\xf6re filtrele..."})}),(0,n.jsx)(Z.Bw,{children:(0,n.jsx)(E.x,{className:"h-48",children:(0,n.jsxs)(Z.DI,{children:[(0,n.jsx)(Z.n5,{children:"Eklentiler"}),(0,n.jsx)(Z.Ql,{value:" ",children:"T\xfcm\xfc"}),i.map(e=>(0,n.jsx)(Z.Ql,{value:e.display_name,children:e.display_name},e.id))]})})})]},t.getFilterValue())]})}var z=s(2361),R=s(986);let q=()=>{let[e,t]=(0,l.useState)(!0),[s,c]=(0,l.useState)([]),[d,p]=(0,l.useState)([]),g=(0,l.useRef)(),{t:j}=(0,o.$G)("settings"),{toast:b}=(0,y.p)(),N=(0,a.useRouter)(),k=(0,u.q)(),[w,_]=(0,l.useState)([]);(0,l.useEffect)(()=>{N.query.role_id&&r.dJ.get("/settings/roles/".concat(N.query.role_id,"/extensions")).then(e=>{_(e.data.selected)})},[N.query.role_id]);let C=[{id:"select",header:e=>{let{table:t}=e;return(0,n.jsx)(m.X,{checked:t.getIsAllPageRowsSelected(),onCheckedChange:e=>t.toggleAllPageRowsSelected(!!e),"aria-label":"Select all",className:"translate-y-[2px]"})},cell:e=>{let{row:t}=e;return(0,n.jsx)(m.X,{checked:t.getIsSelected(),onCheckedChange:e=>t.toggleSelected(!!e),"aria-label":"Select row",className:"translate-y-[2px]"})},enableSorting:!1,enableHiding:!1},{accessorKey:"display_name",header:e=>{let{column:t}=e;return(0,n.jsx)(S,{column:t,title:j("roles.functions.display_name"),extensions:w})},title:j("roles.functions.display_name")},{accessorKey:"description",header:e=>{let{column:t}=e;return(0,n.jsx)(h.p,{column:t,title:j("roles.functions.function_name")})},title:j("roles.functions.function_name")}],E=e=>{r.dJ.get("/settings/roles/".concat(e||N.query.role_id,"/functions")).then(e=>{c(e.data),t(!1)})};(0,l.useEffect)(()=>{N.query.role_id&&E()},[N.query.role_id]),(0,l.useEffect)(()=>(k.on("REFETCH_FUNCTIONS",e=>{E(e)}),()=>k.off("REFETCH_FUNCTIONS")),[]);let Z=()=>{(null==d?void 0:d.length)&&r.dJ.delete("/settings/roles/".concat(N.query.role_id,"/functions"),{data:{permission_ids:d.map(e=>e.id)}}).then(e=>{if(200===e.status){var t;b({title:j("success"),description:j("roles.functions.delete_success")}),E(),null===(t=g.current)||void 0===t||t.resetRowSelection(),k.emit("REFETCH_ROLE",N.query.role_id),p([])}else b({title:j("error"),description:j("roles.functions.delete_error"),variant:"destructive"})}).catch(()=>{b({title:j("error"),description:j("roles.functions.delete_error"),variant:"destructive"})})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(R.Z,{title:j("roles.functions.title"),description:j("roles.functions.description")}),(0,n.jsx)(x.Z,{tableRef:g,columns:C,data:s,loading:e,selectable:!0,onSelectedRowsChange:e=>p(e),children:(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(v,{}),(0,n.jsxs)(z.aR,{children:[(0,n.jsx)(z.vW,{asChild:!0,children:(0,n.jsxs)(f.z,{variant:"outline",className:"ml-auto h-8 lg:flex",size:"sm",disabled:!(null==d?void 0:d.length),children:[(0,n.jsx)(i.Z,{className:"mr-2 size-4"}),j("roles.functions.delete")]})}),(0,n.jsxs)(z._T,{children:[(0,n.jsxs)(z.fY,{children:[(0,n.jsx)(z.f$,{children:j("roles.functions.delete_dialog.title")}),(0,n.jsx)(z.yT,{children:j("roles.functions.delete_dialog.description")})]}),(0,n.jsxs)(z.xo,{children:[(0,n.jsx)(z.le,{children:j("roles.functions.delete_dialog.cancel")}),(0,n.jsx)(z.OL,{onClick:()=>Z(),children:j("roles.functions.delete_dialog.delete")})]})]})]})]})})]})};q.getLayout=function(e){return(0,n.jsx)(c.Z,{children:e})};var F=q},6069:function(e,t,s){"use strict";s.d(t,{fC:function(){return k},z$:function(){return w}});var n=s(7462),r=s(7294),i=s(8771),a=s(5360),l=s(6206),o=s(7342),c=s(7898),d=s(7546),u=s(9115),f=s(5320);let m="Checkbox",[x,h]=(0,a.b)(m),[p,g]=x(m),y=(0,r.forwardRef)((e,t)=>{let{__scopeCheckbox:s,name:a,checked:c,defaultChecked:d,required:u,disabled:m,value:x="on",onCheckedChange:h,...g}=e,[y,j]=(0,r.useState)(null),k=(0,i.e)(t,e=>j(e)),w=(0,r.useRef)(!1),_=!y||!!y.closest("form"),[C=!1,E]=(0,o.T)({prop:c,defaultProp:d,onChange:h}),Z=(0,r.useRef)(C);return(0,r.useEffect)(()=>{let e=null==y?void 0:y.form;if(e){let t=()=>E(Z.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[y,E]),(0,r.createElement)(p,{scope:s,state:C,disabled:m},(0,r.createElement)(f.WV.button,(0,n.Z)({type:"button",role:"checkbox","aria-checked":b(C)?"mixed":C,"aria-required":u,"data-state":N(C),"data-disabled":m?"":void 0,disabled:m,value:x},g,{ref:k,onKeyDown:(0,l.M)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,l.M)(e.onClick,e=>{E(e=>!!b(e)||!e),_&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})})),_&&(0,r.createElement)(v,{control:y,bubbles:!w.current,name:a,value:x,checked:C,required:u,disabled:m,style:{transform:"translateX(-100%)"}}))}),j=(0,r.forwardRef)((e,t)=>{let{__scopeCheckbox:s,forceMount:i,...a}=e,l=g("CheckboxIndicator",s);return(0,r.createElement)(u.z,{present:i||b(l.state)||!0===l.state},(0,r.createElement)(f.WV.span,(0,n.Z)({"data-state":N(l.state),"data-disabled":l.disabled?"":void 0},a,{ref:t,style:{pointerEvents:"none",...e.style}})))}),v=e=>{let{control:t,checked:s,bubbles:i=!0,...a}=e,l=(0,r.useRef)(null),o=(0,c.D)(s),u=(0,d.t)(t);return(0,r.useEffect)(()=>{let e=l.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==s&&t){let n=new Event("click",{bubbles:i});e.indeterminate=b(s),t.call(e,!b(s)&&s),e.dispatchEvent(n)}},[o,s,i]),(0,r.createElement)("input",(0,n.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:!b(s)&&s},a,{tabIndex:-1,ref:l,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function b(e){return"indeterminate"===e}function N(e){return b(e)?"indeterminate":e?"checked":"unchecked"}let k=y,w=j},9102:function(e,t,s){"use strict";s.d(t,{f:function(){return a}});var n=s(7462),r=s(7294),i=s(5320);let a=(0,r.forwardRef)((e,t)=>(0,r.createElement)(i.WV.label,(0,n.Z)({},e,{ref:t,onMouseDown:t=>{var s;null===(s=e.onMouseDown)||void 0===s||s.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault()}})))},9391:function(e,t,s){"use strict";function n(e){return{all:e=e||new Map,on:function(t,s){var n=e.get(t);n?n.push(s):e.set(t,[s])},off:function(t,s){var n=e.get(t);n&&(s?n.splice(n.indexOf(s)>>>0,1):e.set(t,[]))},emit:function(t,s){var n=e.get(t);n&&n.slice().map(function(e){e(s)}),(n=e.get("*"))&&n.slice().map(function(e){e(t,s)})}}}s.d(t,{Z:function(){return n}})}},function(e){e.O(0,[5059,3265,6419,5855,2888,9774,179],function(){return e(e.s=4683)}),_N_E=e.O()}]);