(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6549],{1325:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(5711).Z)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},9404:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(5711).Z)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},5002:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(5711).Z)("FileWarning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},3671:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s(5711).Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},706:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/tokens",function(){return s(263)}])},2766:function(e,t,s){"use strict";s.d(t,{NI:function(){return p},Wi:function(){return u},l0:function(){return o},lX:function(){return h},pf:function(){return j},xJ:function(){return x},zG:function(){return g}});var n=s(5893),r=s(7294),i=s(8426),a=s(7536),c=s(7327),l=s(2297);let o=a.RV,d=r.createContext({}),u=e=>{let{...t}=e;return(0,n.jsx)(d.Provider,{value:{name:t.name},children:(0,n.jsx)(a.Qr,{...t})})},m=()=>{let e=r.useContext(d),t=r.useContext(f),{getFieldState:s,formState:n}=(0,a.Gc)(),i=s(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:c}=t;return{id:c,name:e.name,formItemId:"".concat(c,"-form-item"),formDescriptionId:"".concat(c,"-form-item-description"),formMessageId:"".concat(c,"-form-item-message"),...i}},f=r.createContext({}),x=r.forwardRef((e,t)=>{let{className:s,...i}=e,a=r.useId();return(0,n.jsx)(f.Provider,{value:{id:a},children:(0,n.jsx)("div",{ref:t,className:(0,c.cn)("space-y-2",s),...i})})});x.displayName="FormItem";let h=r.forwardRef((e,t)=>{let{className:s,...r}=e,{error:i,formItemId:a}=m();return(0,n.jsx)(l._,{ref:t,className:(0,c.cn)(i&&"text-destructive",s),htmlFor:a,...r})});h.displayName="FormLabel";let p=r.forwardRef((e,t)=>{let{...s}=e,{error:r,formItemId:a,formDescriptionId:c,formMessageId:l}=m();return(0,n.jsx)(i.g7,{ref:t,id:a,"aria-describedby":r?"".concat(c," ").concat(l):"".concat(c),"aria-invalid":!!r,...s})});p.displayName="FormControl";let j=r.forwardRef((e,t)=>{let{className:s,...r}=e,{formDescriptionId:i}=m();return(0,n.jsx)("p",{ref:t,id:i,className:(0,c.cn)("text-sm text-muted-foreground",s),...r})});j.displayName="FormDescription";let g=r.forwardRef((e,t)=>{let{className:s,children:r,...i}=e,{error:a,formMessageId:l}=m(),o=a?String(null==a?void 0:a.message):r;return o?(0,n.jsx)("p",{ref:t,id:l,className:(0,c.cn)("text-sm font-medium text-destructive",s),...i,children:o}):null});g.displayName="FormMessage"},1396:function(e,t,s){"use strict";s.d(t,{Cd:function(){return o},X:function(){return d},bZ:function(){return l}});var n=s(5893),r=s(7294),i=s(5139),a=s(7327);let c=(0,i.j)("relative w-full rounded-lg border p-4 [&:has(svg)]:pl-11 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=r.forwardRef((e,t)=>{let{className:s,variant:r,...i}=e;return(0,n.jsx)("div",{ref:t,role:"alert",className:(0,a.cn)(c({variant:r}),s),...i})});l.displayName="Alert";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("h5",{ref:t,className:(0,a.cn)("mb-1 font-medium leading-none tracking-tight",s),...r})});o.displayName="AlertTitle";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("text-sm [&_p]:leading-relaxed",s),...r})});d.displayName="AlertDescription"},2297:function(e,t,s){"use strict";s.d(t,{_:function(){return o}});var n=s(5893),r=s(7294),i=s(9102),a=s(5139),c=s(7327);let l=(0,a.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)(i.f,{ref:t,className:(0,c.cn)(l(),s),...r})});o.displayName=i.f.displayName},986:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var n=s(5893),r=s(9008),i=s.n(r);function a(e){let{title:t,description:s,rightSide:r}=e;return(0,n.jsxs)("div",{className:"flex-1 flex-col p-8 md:flex",children:[(0,n.jsx)(i(),{children:(0,n.jsx)("title",{children:"".concat(t," | DZ")})}),(0,n.jsxs)("div",{className:"flex items-center justify-between space-y-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:t}),(0,n.jsx)("p",{className:"text-muted-foreground",children:s})]}),r&&(0,n.jsx)("div",{className:"flex items-center",children:r})]})]})}},5050:function(e,t,s){"use strict";s.d(t,{p:function(){return i}}),s(7294);var n=s(7421),r=s(4712);function i(){let{t:e}=(0,n.$G)("common");return{toast:t=>{let{title:s,description:n,variant:i}=t,a={description:n,duration:6e3,dismissible:!0},c="";switch(s==e("information")?c="info":s==e("success")?c="success":s==e("error")?c="error":s==e("warning")&&(c="warning"),i&&(c=i),c){case"success":return r.A.success(s,a);case"error":case"destructive":return r.A.error(s,a);case"warning":return r.A.warning(s,a);case"info":return r.A.info(s,a);default:return(0,r.A)(s,a)}}}}},8946:function(e,t,s){"use strict";s.d(t,{q:function(){return r}});let n=(0,s(9391).Z)(),r=()=>n},263:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return R}});var n=s(5893),r=s(9774),i=s(6312),a=s(1325),c=s(5002),l=s(7294),o=s(7536),d=s(7421),u=s(1604),m=s(2766),f=s(9404),x=s(3671),h=s(8946),p=s(2361),j=s(7249),g=s(7776),v=s(733),k=s(5050);function N(e){let{row:t}=e,{t:s}=(0,d.$G)("settings"),r=t.original,[i,a]=(0,l.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(g.h_,{children:[(0,n.jsx)(g.$F,{asChild:!0,children:(0,n.jsxs)(j.z,{variant:"ghost",className:"flex size-5 p-0 data-[state=open]:bg-muted",children:[(0,n.jsx)(f.Z,{className:"size-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,n.jsx)(g.AW,{align:"end",className:"w-[160px]",children:(0,n.jsxs)(g.Xi,{onClick:()=>a(!0),children:[(0,n.jsx)(x.Z,{className:"mr-2 size-3.5"}),s("delete")]})})]}),(0,n.jsx)(_,{open:i,setOpen:a,tokenObject:r})]})}function _(e){let{open:t,setOpen:s,tokenObject:i}=e,a=(0,h.q)(),{toast:c}=(0,k.p)(),{t:o}=(0,d.$G)("settings"),[u,m]=(0,l.useState)(!1),f=()=>{m(!0),r.dJ.delete("/settings/tokens/".concat(i.id)).then(()=>{c({title:o("success"),description:o("tokens.toasts.delete_success")}),a.emit("REFETCH_TOKENS"),s(!1)}).catch(()=>{c({title:o("error"),description:o("tokens.toasts.delete_error"),variant:"destructive"})}).finally(()=>{m(!1)})};return(0,n.jsx)(p.aR,{open:t,onOpenChange:e=>s(e),children:(0,n.jsxs)(p._T,{children:[(0,n.jsxs)(p.fY,{children:[(0,n.jsx)(p.f$,{children:o("tokens.delete.title")}),(0,n.jsx)(p.yT,{children:(0,n.jsx)("span",{dangerouslySetInnerHTML:{__html:o("tokens.delete.description",{token:i.name})}})})]}),(0,n.jsxs)(p.xo,{children:[(0,n.jsx)(p.le,{children:o("tokens.delete.cancel")}),(0,n.jsxs)(p.OL,{onClick:()=>f(),children:[u&&(0,n.jsx)(v.P.spinner,{className:"size-4 animate-spin"}),o("tokens.delete.delete")]})]})]})})}var y=s(1396),w=s(5282),b=s(2532),F=s(7622),E=s(5037),Z=s(2297),z=s(986),C=s(7327);function R(){let[e,t]=(0,l.useState)(!0),[s,i]=(0,l.useState)([]),{t:a,i18n:c}=(0,d.$G)("settings"),o=(0,h.q)(),u=[{accessorKey:"name",header:e=>{let{column:t}=e;return(0,n.jsx)(b.p,{column:t,title:a("tokens.name")})},title:a("tokens.name")},{accessorKey:"ip_range",header:e=>{let{column:t}=e;return(0,n.jsx)(b.p,{column:t,title:a("tokens.ip_range")})},title:a("tokens.ip_range")},{accessorKey:"last_used_ip",header:e=>{let{column:t}=e;return(0,n.jsx)(b.p,{column:t,title:a("tokens.last_used_ip")})},title:a("tokens.last_used_ip")},{accessorKey:"last_used_at",header:e=>{let{column:t}=e;return(0,n.jsx)(b.p,{column:t,title:a("tokens.last_used_at")})},title:a("tokens.last_used_at"),cell:e=>{let{row:t}=e;return(0,n.jsx)(n.Fragment,{children:t.original.last_used_at?new Date(t.original.last_used_at).toLocaleDateString(c.language,{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):a("tokens.unknown")})}},{id:"actions",cell:e=>{let{row:t}=e;return(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)(N,{row:t})})}}],m=()=>{r.dJ.get("/settings/tokens").then(e=>{i(e.data),t(!1)})};return(0,l.useEffect)(()=>{m()},[]),(0,l.useEffect)(()=>(o.on("REFETCH_TOKENS",()=>{m()}),()=>o.off("REFETCH_TOKENS")),[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(z.Z,{title:a("tokens.title"),description:a("tokens.description")}),(0,n.jsx)(w.Z,{columns:u,data:s,loading:e,selectable:!1,children:(0,n.jsx)(S,{})})]})}function S(){let{t:e}=(0,d.$G)("settings"),{toast:t}=(0,k.p)(),s=(0,h.q)(),[f,x]=(0,l.useState)(""),p=u.z.object({name:u.z.string().min(1,e("tokens.validation.name")).max(75,e("tokens.validation.name")),ip_range:u.z.string().ip({version:"v4",message:e("external_notifications.validation.ip")})}),g=(0,o.cI)({resolver:(0,i.F)(p),defaultValues:{name:"",ip_range:""}}),[v,N]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{v&&x("")},[v]),(0,n.jsxs)(F.Vq,{onOpenChange:e=>N(e),open:v,children:[(0,n.jsx)(F.hg,{asChild:!0,children:(0,n.jsxs)(j.z,{variant:"outline",size:"sm",className:"ml-auto h-8 lg:flex",children:[(0,n.jsx)(a.Z,{className:"mr-2 size-4"}),e("tokens.create.button")]})}),(0,n.jsxs)(F.cZ,{className:"sm:max-w-[525px]",children:[(0,n.jsxs)(F.fK,{children:[(0,n.jsx)(F.$N,{children:e("tokens.create.title")}),(0,n.jsx)(F.Be,{children:e("tokens.create.description")})]}),f&&(0,n.jsxs)(y.bZ,{children:[(0,n.jsx)(c.Z,{className:"size-4"}),(0,n.jsx)(y.Cd,{children:e("tokens.create.alert_title")}),(0,n.jsxs)(y.X,{children:[e("tokens.create.alert_description"),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsx)("b",{children:f})]})]}),(0,n.jsx)(m.l0,{...g,children:(0,n.jsxs)("form",{onSubmit:g.handleSubmit(n=>{r.dJ.post("/settings/tokens",n).then(n=>{200===n.status?(t({title:e("success"),description:e("tokens.toasts.create_success")}),x(n.data.token),s.emit("REFETCH_TOKENS"),g.reset()):t({title:e("error"),description:e("tokens.toasts.create_error"),variant:"destructive"})}).catch(s=>{(0,C.FB)(s,g)||t({title:e("error"),description:e("tokens.toasts.create_error"),variant:"destructive"})})}),className:"space-y-5",children:[(0,n.jsx)(m.Wi,{control:g.control,name:"name",render:t=>{let{field:s}=t;return(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,n.jsx)(Z._,{htmlFor:"name",className:"text-right",children:e("tokens.create.form.name")}),(0,n.jsxs)("div",{className:"col-span-3",children:[(0,n.jsx)(E.I,{id:"name",...s,maxLength:75}),(0,n.jsx)(m.zG,{className:"mt-1"})]})]})}}),(0,n.jsx)(m.Wi,{control:g.control,name:"ip_range",render:t=>{let{field:s}=t;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,n.jsx)(Z._,{htmlFor:"ip",className:"text-right",children:e("tokens.create.form.ip_range")}),(0,n.jsxs)("div",{className:"col-span-3",children:[(0,n.jsx)(E.I,{id:"ip",...s}),(0,n.jsx)(m.zG,{className:"mt-1"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4",children:[(0,n.jsx)("div",{}),(0,n.jsx)("div",{className:"col-span-3",children:(0,n.jsx)("small",{className:"text-sm text-muted-foreground",children:e("tokens.create.subtext")})})]})]})}}),(0,n.jsx)(F.cN,{children:(0,n.jsxs)(j.z,{type:"submit",children:[(0,n.jsx)(a.Z,{className:"mr-2 size-4"}),e("tokens.create.form.submit")]})})]})})]})]})}},9391:function(e,t,s){"use strict";function n(e){return{all:e=e||new Map,on:function(t,s){var n=e.get(t);n?n.push(s):e.set(t,[s])},off:function(t,s){var n=e.get(t);n&&(s?n.splice(n.indexOf(s)>>>0,1):e.set(t,[]))},emit:function(t,s){var n=e.get(t);n&&n.slice().map(function(e){e(s)}),(n=e.get("*"))&&n.slice().map(function(e){e(t,s)})}}}s.d(t,{Z:function(){return n}})}},function(e){e.O(0,[5059,3265,3051,5855,2888,9774,179],function(){return e(e.s=706)}),_N_E=e.O()}]);