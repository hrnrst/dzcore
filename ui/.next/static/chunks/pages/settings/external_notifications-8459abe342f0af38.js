(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9908],{1325:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,n(5711).Z)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},9404:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,n(5711).Z)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},5002:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,n(5711).Z)("FileWarning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},3671:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,n(5711).Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},42:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/external_notifications",function(){return n(2200)}])},2766:function(e,t,n){"use strict";n.d(t,{NI:function(){return p},Wi:function(){return u},l0:function(){return o},lX:function(){return h},pf:function(){return j},xJ:function(){return m},zG:function(){return g}});var i=n(5893),s=n(7294),r=n(8426),a=n(7536),c=n(7327),l=n(2297);let o=a.RV,d=s.createContext({}),u=e=>{let{...t}=e;return(0,i.jsx)(d.Provider,{value:{name:t.name},children:(0,i.jsx)(a.Qr,{...t})})},f=()=>{let e=s.useContext(d),t=s.useContext(x),{getFieldState:n,formState:i}=(0,a.Gc)(),r=n(e.name,i);if(!e)throw Error("useFormField should be used within <FormField>");let{id:c}=t;return{id:c,name:e.name,formItemId:"".concat(c,"-form-item"),formDescriptionId:"".concat(c,"-form-item-description"),formMessageId:"".concat(c,"-form-item-message"),...r}},x=s.createContext({}),m=s.forwardRef((e,t)=>{let{className:n,...r}=e,a=s.useId();return(0,i.jsx)(x.Provider,{value:{id:a},children:(0,i.jsx)("div",{ref:t,className:(0,c.cn)("space-y-2",n),...r})})});m.displayName="FormItem";let h=s.forwardRef((e,t)=>{let{className:n,...s}=e,{error:r,formItemId:a}=f();return(0,i.jsx)(l._,{ref:t,className:(0,c.cn)(r&&"text-destructive",n),htmlFor:a,...s})});h.displayName="FormLabel";let p=s.forwardRef((e,t)=>{let{...n}=e,{error:s,formItemId:a,formDescriptionId:c,formMessageId:l}=f();return(0,i.jsx)(r.g7,{ref:t,id:a,"aria-describedby":s?"".concat(c," ").concat(l):"".concat(c),"aria-invalid":!!s,...n})});p.displayName="FormControl";let j=s.forwardRef((e,t)=>{let{className:n,...s}=e,{formDescriptionId:r}=f();return(0,i.jsx)("p",{ref:t,id:r,className:(0,c.cn)("text-sm text-muted-foreground",n),...s})});j.displayName="FormDescription";let g=s.forwardRef((e,t)=>{let{className:n,children:s,...r}=e,{error:a,formMessageId:l}=f(),o=a?String(null==a?void 0:a.message):s;return o?(0,i.jsx)("p",{ref:t,id:l,className:(0,c.cn)("text-sm font-medium text-destructive",n),...r,children:o}):null});g.displayName="FormMessage"},1396:function(e,t,n){"use strict";n.d(t,{Cd:function(){return o},X:function(){return d},bZ:function(){return l}});var i=n(5893),s=n(7294),r=n(5139),a=n(7327);let c=(0,r.j)("relative w-full rounded-lg border p-4 [&:has(svg)]:pl-11 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=s.forwardRef((e,t)=>{let{className:n,variant:s,...r}=e;return(0,i.jsx)("div",{ref:t,role:"alert",className:(0,a.cn)(c({variant:s}),n),...r})});l.displayName="Alert";let o=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,i.jsx)("h5",{ref:t,className:(0,a.cn)("mb-1 font-medium leading-none tracking-tight",n),...s})});o.displayName="AlertTitle";let d=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,i.jsx)("div",{ref:t,className:(0,a.cn)("text-sm [&_p]:leading-relaxed",n),...s})});d.displayName="AlertDescription"},2297:function(e,t,n){"use strict";n.d(t,{_:function(){return o}});var i=n(5893),s=n(7294),r=n(9102),a=n(5139),c=n(7327);let l=(0,a.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,i.jsx)(r.f,{ref:t,className:(0,c.cn)(l(),n),...s})});o.displayName=r.f.displayName},986:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(5893),s=n(9008),r=n.n(s);function a(e){let{title:t,description:n,rightSide:s}=e;return(0,i.jsxs)("div",{className:"flex-1 flex-col p-8 md:flex",children:[(0,i.jsx)(r(),{children:(0,i.jsx)("title",{children:"".concat(t," | DZ")})}),(0,i.jsxs)("div",{className:"flex items-center justify-between space-y-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:t}),(0,i.jsx)("p",{className:"text-muted-foreground",children:n})]}),s&&(0,i.jsx)("div",{className:"flex items-center",children:s})]})]})}},5050:function(e,t,n){"use strict";n.d(t,{p:function(){return r}}),n(7294);var i=n(7421),s=n(4712);function r(){let{t:e}=(0,i.$G)("common");return{toast:t=>{let{title:n,description:i,variant:r}=t,a={description:i,duration:6e3,dismissible:!0},c="";switch(n==e("information")?c="info":n==e("success")?c="success":n==e("error")?c="error":n==e("warning")&&(c="warning"),r&&(c=r),c){case"success":return s.A.success(n,a);case"error":case"destructive":return s.A.error(n,a);case"warning":return s.A.warning(n,a);case"info":return s.A.info(n,a);default:return(0,s.A)(n,a)}}}}},8946:function(e,t,n){"use strict";n.d(t,{q:function(){return s}});let i=(0,n(9391).Z)(),s=()=>i},2200:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var i=n(5893),s=n(9774),r=n(6312),a=n(1325),c=n(5002),l=n(7294),o=n(7536),d=n(7421),u=n(1604),f=n(2766),x=n(9404),m=n(3671),h=n(8946),p=n(2361),j=n(7249),g=n(7776),_=n(733),v=n(5050);function N(e){let{row:t}=e,n=t.original,[s,r]=(0,l.useState)(!1),{t:a}=(0,d.$G)("settings");return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(g.h_,{children:[(0,i.jsx)(g.$F,{asChild:!0,children:(0,i.jsxs)(j.z,{variant:"ghost",className:"flex size-5 p-0 data-[state=open]:bg-muted",children:[(0,i.jsx)(x.Z,{className:"size-4"}),(0,i.jsx)("span",{className:"sr-only",children:a("external_notifications.actions.open_menu")})]})}),(0,i.jsx)(g.AW,{align:"end",className:"w-[160px]",children:(0,i.jsxs)(g.Xi,{onClick:()=>r(!0),children:[(0,i.jsx)(m.Z,{className:"mr-2 size-3.5"}),a("external_notifications.actions.delete")]})})]}),(0,i.jsx)(y,{open:s,setOpen:r,externalNotification:n})]})}function y(e){let{open:t,setOpen:n,externalNotification:r}=e,a=(0,h.q)(),{toast:c}=(0,v.p)(),[o,u]=(0,l.useState)(!1),{t:f}=(0,d.$G)("settings"),x=()=>{u(!0),s.dJ.delete("/settings/notifications/external/".concat(r.id)).then(()=>{c({title:f("external_notifications.actions.success"),description:f("external_notifications.actions.toasts.success")}),a.emit("REFETCH_EXTERNAL_NOTIFICATIONS"),n(!1)}).catch(()=>{c({title:f("external_notifications.actions.error"),description:f("external_notifications.actions.toasts.error"),variant:"destructive"})}).finally(()=>{u(!1)})};return(0,i.jsx)(p.aR,{open:t,onOpenChange:e=>n(e),children:(0,i.jsxs)(p._T,{children:[(0,i.jsxs)(p.fY,{children:[(0,i.jsx)(p.f$,{children:f("external_notifications.actions.confirm")}),(0,i.jsx)(p.yT,{children:(0,i.jsx)("span",{dangerouslySetInnerHTML:{__html:f("external_notifications.actions.confirm_delete",{external_notification:r.name})}})})]}),(0,i.jsxs)(p.xo,{children:[(0,i.jsx)(p.le,{children:f("external_notifications.actions.no")}),(0,i.jsxs)(p.OL,{onClick:()=>x(),children:[o&&(0,i.jsx)(_.P.spinner,{className:"size-4 animate-spin"}),f("external_notifications.actions.yes")]})]})]})})}var w=n(1396),b=n(5282),F=n(2532),E=n(7622),k=n(5037),C=n(2297),I=n(986),T=n(7327);function Z(){let[e,t]=(0,l.useState)(!0),[n,r]=(0,l.useState)([]),{t:a,i18n:c}=(0,d.$G)("settings"),o=(0,h.q)(),u=[{accessorKey:"name",header:e=>{let{column:t}=e;return(0,i.jsx)(F.p,{column:t,title:a("external_notifications.name")})},title:a("external_notifications.name")},{accessorKey:"ip",header:e=>{let{column:t}=e;return(0,i.jsx)(F.p,{column:t,title:a("external_notifications.ip_address")})},title:a("external_notifications.ip_address")},{accessorKey:"last_used",header:e=>{let{column:t}=e;return(0,i.jsx)(F.p,{column:t,title:a("external_notifications.last_used")})},title:a("external_notifications.last_used"),cell:e=>{let{row:t}=e;return(0,i.jsx)(i.Fragment,{children:t.original.last_used?new Date(t.original.last_used).toLocaleDateString(c.language,{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):a("external_notifications.unknown")})}},{id:"actions",cell:e=>{let{row:t}=e;return(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)(N,{row:t})})}}],f=()=>{s.dJ.get("/settings/notifications/external").then(e=>{r(e.data),t(!1)})};return(0,l.useEffect)(()=>{f()},[]),(0,l.useEffect)(()=>(o.on("REFETCH_EXTERNAL_NOTIFICATIONS",()=>{f()}),()=>o.off("REFETCH_EXTERNAL_NOTIFICATIONS")),[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(I.Z,{title:a("external_notifications.title"),description:a("external_notifications.description")}),(0,i.jsx)(b.Z,{columns:u,data:n,loading:e,selectable:!1,children:(0,i.jsx)(z,{})})]})}function z(){let{t:e}=(0,d.$G)("settings"),{toast:t}=(0,v.p)(),n=(0,h.q)(),[x,m]=(0,l.useState)(""),p=u.z.object({name:u.z.string().min(1,e("external_notifications.validation.name")).max(50,e("external_notifications.validation.name")),ip:u.z.string().ip({version:"v4",message:e("external_notifications.validation.ip")})}),g=(0,o.cI)({resolver:(0,r.F)(p),defaultValues:{name:"",ip:""}}),[_,N]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{_&&m("")},[_]),(0,i.jsxs)(E.Vq,{onOpenChange:e=>N(e),open:_,children:[(0,i.jsx)(E.hg,{asChild:!0,children:(0,i.jsxs)(j.z,{variant:"outline",size:"sm",className:"ml-auto h-8 lg:flex",children:[(0,i.jsx)(a.Z,{className:"mr-2 size-4"}),e("external_notifications.create.button")]})}),(0,i.jsxs)(E.cZ,{className:"sm:max-w-[525px]",children:[(0,i.jsxs)(E.fK,{children:[(0,i.jsx)(E.$N,{children:e("external_notifications.create.title")}),(0,i.jsx)(E.Be,{children:e("external_notifications.create.description")})]}),x&&(0,i.jsxs)(w.bZ,{children:[(0,i.jsx)(c.Z,{className:"size-4"}),(0,i.jsx)(w.Cd,{children:e("external_notifications.create.alert_title")}),(0,i.jsxs)(w.X,{children:[e("external_notifications.create.alert_description"),(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)("b",{children:x})]})]}),(0,i.jsx)(f.l0,{...g,children:(0,i.jsxs)("form",{onSubmit:g.handleSubmit(i=>{s.dJ.post("/settings/notifications/external",i).then(i=>{200===i.status?(t({title:e("success"),description:e("external_notifications.toasts.success")}),m(i.data.token),n.emit("REFETCH_EXTERNAL_NOTIFICATIONS"),g.reset()):t({title:e("error"),description:e("external_notifications.toasts.error"),variant:"destructive"})}).catch(n=>{(0,T.FB)(n,g)||t({title:e("error"),description:e("external_notifications.toasts.error"),variant:"destructive"})})}),className:"space-y-5",children:[(0,i.jsx)(f.Wi,{control:g.control,name:"name",render:t=>{let{field:n}=t;return(0,i.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,i.jsx)(C._,{htmlFor:"name",className:"text-right",children:e("external_notifications.create.name")}),(0,i.jsxs)("div",{className:"col-span-3",children:[(0,i.jsx)(k.I,{id:"name",...n,maxLength:50}),(0,i.jsx)(f.zG,{className:"mt-1"})]})]})}}),(0,i.jsx)(f.Wi,{control:g.control,name:"ip",render:t=>{let{field:n}=t;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,i.jsx)(C._,{htmlFor:"ip",className:"text-right",children:e("external_notifications.create.ip")}),(0,i.jsxs)("div",{className:"col-span-3",children:[(0,i.jsx)(k.I,{id:"ip",...n}),(0,i.jsx)(f.zG,{className:"mt-1"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-4",children:[(0,i.jsx)("div",{}),(0,i.jsx)("div",{className:"col-span-3",children:(0,i.jsx)("small",{className:"text-sm text-muted-foreground",children:(0,i.jsx)("span",{dangerouslySetInnerHTML:{__html:e("external_notifications.create.subtext")}})})})]})]})}}),(0,i.jsx)(E.cN,{children:(0,i.jsxs)(j.z,{type:"submit",children:[(0,i.jsx)(a.Z,{className:"mr-2 size-4"}),e("external_notifications.create.create")]})})]})})]})]})}},9391:function(e,t,n){"use strict";function i(e){return{all:e=e||new Map,on:function(t,n){var i=e.get(t);i?i.push(n):e.set(t,[n])},off:function(t,n){var i=e.get(t);i&&(n?i.splice(i.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var i=e.get(t);i&&i.slice().map(function(e){e(n)}),(i=e.get("*"))&&i.slice().map(function(e){e(t,n)})}}}n.d(t,{Z:function(){return i}})}},function(e){e.O(0,[5059,3265,3051,5855,2888,9774,179],function(){return e(e.s=42)}),_N_E=e.O()}]);