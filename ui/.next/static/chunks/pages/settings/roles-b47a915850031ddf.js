(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8801],{1325:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(5711).Z)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},9404:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(5711).Z)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},2664:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(5711).Z)("Footprints",[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]])},7235:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(5711).Z)("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]])},7705:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(5711).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},3671:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(5711).Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},4691:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/roles",function(){return s(6017)}])},2766:function(e,t,s){"use strict";s.d(t,{NI:function(){return p},Wi:function(){return d},l0:function(){return o},lX:function(){return h},pf:function(){return j},xJ:function(){return x},zG:function(){return g}});var r=s(5893),n=s(7294),i=s(8426),c=s(7536),a=s(7327),l=s(2297);let o=c.RV,u=n.createContext({}),d=e=>{let{...t}=e;return(0,r.jsx)(u.Provider,{value:{name:t.name},children:(0,r.jsx)(c.Qr,{...t})})},m=()=>{let e=n.useContext(u),t=n.useContext(f),{getFieldState:s,formState:r}=(0,c.Gc)(),i=s(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:a}=t;return{id:a,name:e.name,formItemId:"".concat(a,"-form-item"),formDescriptionId:"".concat(a,"-form-item-description"),formMessageId:"".concat(a,"-form-item-message"),...i}},f=n.createContext({}),x=n.forwardRef((e,t)=>{let{className:s,...i}=e,c=n.useId();return(0,r.jsx)(f.Provider,{value:{id:c},children:(0,r.jsx)("div",{ref:t,className:(0,a.cn)("space-y-2",s),...i})})});x.displayName="FormItem";let h=n.forwardRef((e,t)=>{let{className:s,...n}=e,{error:i,formItemId:c}=m();return(0,r.jsx)(l._,{ref:t,className:(0,a.cn)(i&&"text-destructive",s),htmlFor:c,...n})});h.displayName="FormLabel";let p=n.forwardRef((e,t)=>{let{...s}=e,{error:n,formItemId:c,formDescriptionId:a,formMessageId:l}=m();return(0,r.jsx)(i.g7,{ref:t,id:c,"aria-describedby":n?"".concat(a," ").concat(l):"".concat(a),"aria-invalid":!!n,...s})});p.displayName="FormControl";let j=n.forwardRef((e,t)=>{let{className:s,...n}=e,{formDescriptionId:i}=m();return(0,r.jsx)("p",{ref:t,id:i,className:(0,a.cn)("text-sm text-muted-foreground",s),...n})});j.displayName="FormDescription";let g=n.forwardRef((e,t)=>{let{className:s,children:n,...i}=e,{error:c,formMessageId:l}=m(),o=c?String(null==c?void 0:c.message):n;return o?(0,r.jsx)("p",{ref:t,id:l,className:(0,a.cn)("text-sm font-medium text-destructive",s),...i,children:o}):null});g.displayName="FormMessage"},2297:function(e,t,s){"use strict";s.d(t,{_:function(){return o}});var r=s(5893),n=s(7294),i=s(9102),c=s(5139),a=s(7327);let l=(0,c.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)(i.f,{ref:t,className:(0,a.cn)(l(),s),...n})});o.displayName=i.f.displayName},986:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var r=s(5893),n=s(9008),i=s.n(n);function c(e){let{title:t,description:s,rightSide:n}=e;return(0,r.jsxs)("div",{className:"flex-1 flex-col p-8 md:flex",children:[(0,r.jsx)(i(),{children:(0,r.jsx)("title",{children:"".concat(t," | DZ")})}),(0,r.jsxs)("div",{className:"flex items-center justify-between space-y-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:t}),(0,r.jsx)("p",{className:"text-muted-foreground",children:s})]}),n&&(0,r.jsx)("div",{className:"flex items-center",children:n})]})]})}},5050:function(e,t,s){"use strict";s.d(t,{p:function(){return i}}),s(7294);var r=s(7421),n=s(4712);function i(){let{t:e}=(0,r.$G)("common");return{toast:t=>{let{title:s,description:r,variant:i}=t,c={description:r,duration:6e3,dismissible:!0},a="";switch(s==e("information")?a="info":s==e("success")?a="success":s==e("error")?a="error":s==e("warning")&&(a="warning"),i&&(a=i),a){case"success":return n.A.success(s,c);case"error":case"destructive":return n.A.error(s,c);case"warning":return n.A.warning(s,c);case"info":return n.A.info(s,c);default:return(0,n.A)(s,c)}}}}},8946:function(e,t,s){"use strict";s.d(t,{q:function(){return n}});let r=(0,s(9391).Z)(),n=()=>r},6017:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return S}});var r=s(5893),n=s(9774),i=s(6312),c=s(7235),a=s(2664),l=s(1325),o=s(1163),u=s(7294),d=s(7536),m=s(7421),f=s(1604),x=s(2766),h=s(9404),p=s(7705),j=s(3671),g=s(8946),v=s(2361),y=s(7249),N=s(7776),w=s(733),k=s(5050);function Z(e){let{row:t}=e,s=t.original,[n,i]=(0,u.useState)(!1),c=(0,o.useRouter)(),{t:a}=(0,m.$G)("settings");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(N.h_,{children:[(0,r.jsx)(N.$F,{asChild:!0,children:(0,r.jsxs)(y.z,{variant:"ghost",className:"flex size-5 p-0 data-[state=open]:bg-muted",children:[(0,r.jsx)(h.Z,{className:"size-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,r.jsxs)(N.AW,{className:"w-[160px]",children:[(0,r.jsxs)(N.Xi,{onClick:()=>c.push("/settings/roles/".concat(s.id,"/users")),children:[(0,r.jsx)(p.Z,{className:"mr-2 size-3.5"}),a("roles.actions.edit")]}),(0,r.jsx)(N.VD,{}),(0,r.jsxs)(N.Xi,{onClick:()=>i(!0),children:[(0,r.jsx)(j.Z,{className:"mr-2 size-3.5"}),a("roles.actions.delete")]})]})]}),(0,r.jsx)(_,{open:n,setOpen:i,role:s})]})}function _(e){let{open:t,setOpen:s,role:i}=e,c=(0,g.q)(),{toast:a}=(0,k.p)(),[l,o]=(0,u.useState)(!1),{t:d}=(0,m.$G)("settings"),f=()=>{o(!0),n.dJ.delete("/settings/roles/".concat(i.id)).then(()=>{a({title:d("success"),description:d("roles.actions.success")}),c.emit("REFETCH_ROLES"),s(!1)}).catch(()=>{a({title:d("error"),description:d("roles.actions.error"),variant:"destructive"})}).finally(()=>{o(!1)})};return(0,r.jsx)(v.aR,{open:t,onOpenChange:e=>s(e),children:(0,r.jsxs)(v._T,{children:[(0,r.jsxs)(v.fY,{children:[(0,r.jsx)(v.f$,{children:d("roles.actions.title")}),(0,r.jsx)(v.yT,{children:(0,r.jsx)("span",{dangerouslySetInnerHTML:{__html:d("roles.actions.subtext",{role_name:i.name})}})})]}),(0,r.jsxs)(v.xo,{children:[(0,r.jsx)(v.le,{children:d("roles.actions.no")}),(0,r.jsxs)(v.OL,{onClick:()=>f(),children:[l&&(0,r.jsx)(w.P.spinner,{className:"size-4 animate-spin"}),d("roles.actions.yes")]})]})]})})}var C=s(5282),b=s(2532),F=s(7622),z=s(5037),E=s(2297),M=s(986),R=s(7327);function S(){let e=(0,o.useRouter)(),[t,s]=(0,u.useState)(!0),[i,l]=(0,u.useState)([]),{t:d,i18n:f}=(0,m.$G)("settings"),x=(0,g.q)(),h=[{accessorKey:"name",header:e=>{let{column:t}=e;return(0,r.jsx)(b.p,{column:t,title:d("roles.name")})},title:d("roles.name"),cell:t=>{let{row:s}=t;return(0,r.jsxs)("div",{className:"flex cursor-pointer items-center gap-2",onClick:()=>e.push("/settings/roles/".concat(s.original.id,"/users")),children:[s.original.name," ",(0,r.jsx)(c.Z,{className:"size-4"})]})}},{accessorKey:"updated_at",accessorFn:e=>new Date(e.updated_at).toLocaleDateString(f.language,{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}),header:e=>{let{column:t}=e;return(0,r.jsx)(b.p,{column:t,title:d("roles.updated_at")})},title:d("roles.updated_at"),sortingFn:R.aS},{id:"actions",cell:e=>{let{row:t}=e;return(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(Z,{row:t})})}}],p=()=>{n.dJ.get("/settings/roles").then(e=>{l(e.data),s(!1)})};return(0,u.useEffect)(()=>{p()},[]),(0,u.useEffect)(()=>(x.on("REFETCH_ROLES",()=>{p()}),()=>x.off("REFETCH_ROLES")),[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M.Z,{title:d("roles.title"),description:d("roles.description")}),(0,r.jsx)(C.Z,{columns:h,data:i,loading:t,selectable:!1,children:(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(O,{}),(0,r.jsxs)(y.z,{variant:"outline",size:"sm",className:"ml-auto h-8 lg:flex",onClick:()=>e.push("/settings/roles/details"),children:[(0,r.jsx)(a.Z,{className:"mr-2 size-4"}),d("roles.detailed_view")]})]})})]})}function O(){let{toast:e}=(0,k.p)(),t=(0,o.useRouter)(),{t:s}=(0,m.$G)("settings"),c=f.z.object({name:f.z.string().min(1,s("roles.validation.name"))}),a=(0,d.cI)({resolver:(0,i.F)(c),defaultValues:{name:""}}),[h,p]=(0,u.useState)(!1);return(0,r.jsxs)(F.Vq,{onOpenChange:e=>p(e),open:h,children:[(0,r.jsx)(F.hg,{asChild:!0,children:(0,r.jsxs)(y.z,{variant:"outline",size:"sm",className:"ml-auto h-8 lg:flex",children:[(0,r.jsx)(l.Z,{className:"mr-2 size-4"}),s("roles.create.button")]})}),(0,r.jsxs)(F.cZ,{className:"sm:max-w-[525px]",children:[(0,r.jsxs)(F.fK,{children:[(0,r.jsx)(F.$N,{children:s("roles.create.title")}),(0,r.jsx)(F.Be,{children:s("roles.create.description")})]}),(0,r.jsx)(x.l0,{...a,children:(0,r.jsxs)("form",{onSubmit:a.handleSubmit(r=>{n.dJ.post("/settings/roles",r).then(r=>{200===r.status?(e({title:s("success"),description:s("roles.create.success")}),p(!1),a.reset(),t.push("/settings/roles/".concat(r.data.id,"/users"))):e({title:s("error"),description:s("roles.create.error"),variant:"destructive"})}).catch(t=>{(0,R.FB)(t,a)||e({title:s("error"),description:s("roles.create.error"),variant:"destructive"})})}),className:"space-y-5",children:[(0,r.jsx)(x.Wi,{control:a.control,name:"name",render:e=>{let{field:t}=e;return(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(E._,{htmlFor:"name",className:"text-right",children:s("roles.create.name")}),(0,r.jsxs)("div",{className:"col-span-3",children:[(0,r.jsx)(z.I,{id:"name",...t}),(0,r.jsx)(x.zG,{className:"mt-1"})]})]})}}),(0,r.jsx)(F.cN,{children:(0,r.jsxs)(y.z,{type:"submit",children:[(0,r.jsx)(l.Z,{className:"mr-2 size-4"}),s("roles.create.create")]})})]})})]})]})}},9391:function(e,t,s){"use strict";function r(e){return{all:e=e||new Map,on:function(t,s){var r=e.get(t);r?r.push(s):e.set(t,[s])},off:function(t,s){var r=e.get(t);r&&(s?r.splice(r.indexOf(s)>>>0,1):e.set(t,[]))},emit:function(t,s){var r=e.get(t);r&&r.slice().map(function(e){e(s)}),(r=e.get("*"))&&r.slice().map(function(e){e(t,s)})}}}s.d(t,{Z:function(){return r}})}},function(e){e.O(0,[5059,3265,3051,5855,2888,9774,179],function(){return e(e.s=4691)}),_N_E=e.O()}]);