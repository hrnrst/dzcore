(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[59],{1325:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,t(5711).Z)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},9404:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,t(5711).Z)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},2853:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/subscriptions",function(){return t(444)}])},3749:function(e,s,t){"use strict";t.d(s,{Ol:function(){return l},Zb:function(){return r},aY:function(){return d},ll:function(){return c}});var i=t(5893),n=t(7294),a=t(7327);let r=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,i.jsx)("div",{ref:s,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...n})});r.displayName="Card";let l=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,i.jsx)("div",{ref:s,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t),...n})});l.displayName="CardHeader";let c=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,i.jsx)("h3",{ref:s,className:(0,a.cn)("text-lg font-semibold leading-none tracking-tight",t),...n})});c.displayName="CardTitle",n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,i.jsx)("p",{ref:s,className:(0,a.cn)("text-sm text-muted-foreground",t),...n})}).displayName="CardDescription";let d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,i.jsx)("div",{ref:s,className:(0,a.cn)("p-6 pt-0",t),...n})});d.displayName="CardContent",n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,i.jsx)("div",{ref:s,className:(0,a.cn)(" flex items-center p-6 pt-0",t),...n})}).displayName="CardFooter"},2297:function(e,s,t){"use strict";t.d(s,{_:function(){return d}});var i=t(5893),n=t(7294),a=t(9102),r=t(5139),l=t(7327);let c=(0,r.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,i.jsx)(a.f,{ref:s,className:(0,l.cn)(c(),t),...n})});d.displayName=a.f.displayName},986:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});var i=t(5893),n=t(9008),a=t.n(n);function r(e){let{title:s,description:t,rightSide:n}=e;return(0,i.jsxs)("div",{className:"flex-1 flex-col p-8 md:flex",children:[(0,i.jsx)(a(),{children:(0,i.jsx)("title",{children:"".concat(s," | Liman")})}),(0,i.jsxs)("div",{className:"flex items-center justify-between space-y-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:s}),(0,i.jsx)("p",{className:"text-muted-foreground",children:t})]}),n&&(0,i.jsx)("div",{className:"flex items-center",children:n})]})]})}},4462:function(e,s,t){"use strict";t.d(s,{Bw:function(){return x},DI:function(){return o},Ph:function(){return d},Ql:function(){return p},i4:function(){return m},ki:function(){return u},n5:function(){return f}});var i=t(5893),n=t(7294),a=t(5059),r=t(8971),l=t(3742),c=t(7327);let d=a.fC,o=a.ZA,u=a.B4,m=n.forwardRef((e,s)=>{let{className:t,children:n,...l}=e;return(0,i.jsxs)(a.xz,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...l,children:[n,(0,i.jsx)(a.JO,{asChild:!0,children:(0,i.jsx)(r.Z,{className:"size-4 opacity-50"})})]})});m.displayName=a.xz.displayName;let x=n.forwardRef((e,s)=>{let{className:t,children:n,position:r="popper",...l}=e;return(0,i.jsx)(a.h_,{children:(0,i.jsx)(a.VY,{ref:s,className:(0,c.cn)("relative z-50 min-w-32 overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...l,children:(0,i.jsx)(a.l_,{className:(0,c.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n})})})});x.displayName=a.VY.displayName;let f=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,i.jsx)(a.__,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...n})});f.displayName=a.__.displayName;let p=n.forwardRef((e,s)=>{let{className:t,children:n,...r}=e;return(0,i.jsxs)(a.ck,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors hover:bg-accent focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[(0,i.jsx)("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:(0,i.jsx)(a.wU,{children:(0,i.jsx)(l.Z,{className:"size-4"})})}),(0,i.jsx)(a.eT,{children:n})]})});p.displayName=a.ck.displayName,n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,i.jsx)(a.Z0,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...n})}).displayName=a.Z0.displayName},5765:function(e,s,t){"use strict";t.d(s,{g:function(){return r}});var i=t(5893),n=t(7294),a=t(7327);let r=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,i.jsx)("textarea",{className:(0,a.cn)("flex max-h-[400px] min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...n})});r.displayName="Textarea"},5050:function(e,s,t){"use strict";t.d(s,{p:function(){return a}}),t(7294);var i=t(7421),n=t(4712);function a(){let{t:e}=(0,i.$G)("common");return{toast:s=>{let{title:t,description:i,variant:a}=s,r={description:i,duration:6e3,dismissible:!0},l="";switch(t==e("information")?l="info":t==e("success")?l="success":t==e("error")?l="error":t==e("warning")&&(l="warning"),a&&(l=a),l){case"success":return n.A.success(t,r);case"error":case"destructive":return n.A.error(t,r);case"warning":return n.A.warning(t,r);case"info":return n.A.info(t,r);default:return(0,n.A)(t,r)}}}}},8946:function(e,s,t){"use strict";t.d(s,{q:function(){return n}});let i=(0,t(9391).Z)(),n=()=>i},444:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return R}});var i=t(5893),n=t(9774),a=t(5711);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var l=t(1325),c=t(7294),d=t(7421),o=t(443),u=t(9404);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,a.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),x=(0,a.Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var f=t(8946),p=t(7249),h=t(3749),g=t(7622),j=t(7776),b=t(733),N=t(2297),v=t(4462),y=t(2561),w=t(5765),_=t(5050);function k(e){let{extension:s}=e,{t}=(0,d.$G)("settings"),[a,r]=(0,c.useState)(!0),[g,b]=(0,c.useState)({}),[N,w]=(0,c.useState)(!1),[_,k]=(0,c.useState)(),[C,R]=(0,c.useState)(""),[z,Z]=(0,c.useState)(!0),E=(0,f.q)(),O=e=>{r(!0),n.dJ.get("/settings/subscriptions/".concat(s.id,"/").concat(e)).then(e=>{b(e.data)}).catch(()=>{b({})}).finally(()=>{r(!1)})},D=e=>100-(e-new Date().getTime())/31536e6,I=e=>Math.floor((e-new Date().getTime())/864e5);return(0,c.useEffect)(()=>{Z(!0),n.dJ.get("/settings/subscriptions/".concat(s.id,"/servers")).then(e=>{k(e.data),e.data[0]&&R(e.data[0].id),e.data[0]||(b({valid:!1}),r(!1)),setTimeout(()=>{Z(!1)},500)}).catch(()=>{k([])})},[]),(0,c.useEffect)(()=>(s&&s.id&&C&&(O(C),E.on("SUBSCRIPTION_REFRESH_"+s.id,()=>O(C))),()=>{E.off("SUBSCRIPTION_REFRESH_"+s.id)}),[s,C]),(0,i.jsxs)(h.Zb,{children:[(0,i.jsxs)(h.Ol,{className:"-mt-3 flex flex-row items-center justify-between",children:[(0,i.jsx)(h.ll,{children:s.display_name}),(0,i.jsxs)("div",{className:"flex gap-5",children:[!z&&(0,i.jsx)(i.Fragment,{children:_&&_.length>0&&(0,i.jsxs)(v.Ph,{onValueChange:e=>R(e),defaultValue:C,children:[(0,i.jsxs)(v.i4,{className:"h-18 w-[200px]",children:[(0,i.jsx)(o.Z,{className:"size-4 text-muted-foreground"}),(0,i.jsx)(v.ki,{placeholder:t("subscriptions.subcard.server.placeholder")})]}),(0,i.jsx)(v.Bw,{children:(0,i.jsxs)(v.DI,{children:[(0,i.jsx)(v.n5,{children:t("subscriptions.subcard.server.label")}),_&&_.length>0&&_.map(e=>(0,i.jsx)(v.Ql,{value:e.id,children:e.name},e.id))]})})]})}),z&&(0,i.jsx)(y.O,{className:"h-18 w-[200px] rounded-full"}),(0,i.jsxs)(j.h_,{children:[(0,i.jsx)(j.$F,{disabled:!C,asChild:!0,children:(0,i.jsxs)("div",{className:(0,p.d)({size:"sm",variant:"ghost"}),children:[(0,i.jsx)(u.Z,{className:"size-5"}),(0,i.jsx)("span",{className:"sr-only",children:t("subscriptions.subcard.subscription_settings")})]})}),(0,i.jsxs)(j.AW,{className:"w-56",children:[(0,i.jsx)(j.Ju,{children:t("subscriptions.subcard.subscription_settings")}),(0,i.jsx)(j.VD,{}),(0,i.jsxs)(j.Xi,{onClick:()=>window.open("mailto:aciklab@havelsan.com.tr","_blank"),children:[(0,i.jsx)(m,{className:"mr-2 size-4"})," ",t("subscriptions.subcard.renew")]}),(0,i.jsxs)(j.Xi,{onClick:()=>w(!0),children:[(0,i.jsx)(l.Z,{className:"mr-2 size-4"})," ",t("subscriptions.subcard.add_license")]})]})]})]})]}),(0,i.jsx)(h.aY,{children:(0,i.jsxs)(i.Fragment,{children:[a&&(0,i.jsxs)("div",{className:"flex gap-12",children:[(0,i.jsxs)("div",{className:"part",children:[(0,i.jsx)("h5",{className:"mb-3 font-semibold tracking-tight",children:t("subscriptions.subcard.remaining")}),(0,i.jsxs)("div",{className:"flex items-center gap-5",children:[(0,i.jsx)(y.O,{className:"size-20 rounded-full"}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("span",{className:"text-3xl font-bold",children:(0,i.jsx)(y.O,{className:"h-8 w-20 rounded-md"})}),(0,i.jsx)("small",{className:"text-foreground/60",children:t("subscriptions.subcard.days_remaining")})]})]})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,i.jsxs)("div",{className:"part",children:[(0,i.jsx)("h5",{className:"mb-1 font-semibold tracking-tight",children:t("subscriptions.subcard.issuer")}),(0,i.jsx)(y.O,{className:"h-5 w-32 rounded-md"})]}),(0,i.jsxs)("div",{className:"part",children:[(0,i.jsx)("h5",{className:"mb-1 font-semibold tracking-tight",children:t("subscriptions.subcard.allowed_device_count")}),(0,i.jsx)(y.O,{className:"h-5 w-16 rounded-md"})]})]})]}),!a&&(0,i.jsx)(i.Fragment,{children:g.valid&&("php"===g.type||I(g.timestamp)>0)?(0,i.jsxs)("div",{className:"flex gap-12",children:[(0,i.jsxs)("div",{className:"part",children:[(0,i.jsx)("h5",{className:"mb-3 font-semibold tracking-tight",children:t("subscriptions.subcard.remaining")}),(0,i.jsxs)("div",{className:"flex items-center gap-5",children:["php"!==g.type&&(0,i.jsx)("div",{className:"radial-progress ",style:{"--value":D(g.timestamp),color:6>D(g.timestamp)&&"red!important"},children:(0,i.jsxs)("b",{className:"font-semibold",children:[Math.floor(D(g.timestamp)),"%"]})}),(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("span",{className:"text-3xl font-bold",children:"php"!=g.type?I(g.timestamp):(e=>{let s=new Date(e),t=new Date;return Math.floor((s.getTime()-t.getTime())/864e5)})(g.timestamp)}),(0,i.jsx)("small",{className:"text-foreground/60",children:t("subscriptions.subcard.days_remaining")})]})]})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,i.jsxs)("div",{className:"part",children:[(0,i.jsx)("h5",{className:"mb-1 font-semibold tracking-tight",children:t("subscriptions.subcard.issuer")}),g.owner]}),(0,i.jsxs)("div",{className:"part",children:[(0,i.jsx)("h5",{className:"mb-1 font-semibold tracking-tight",children:t("subscriptions.subcard.allowed_device_count")}),"php"===g.type?g.functions:g.client_count]})]})]}):(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(0,i.jsx)(x,{className:"size-12 text-red-500"}),(0,i.jsx)("h5",{className:"mb-1 font-semibold tracking-tight",children:t("subscriptions.subcard.no_sub")})]})})]})}),(0,i.jsx)(S,{open:N,setOpen:w,extension:s,server:C})]})}function S(e){let{open:s,setOpen:t,extension:a,server:r}=e,{t:o}=(0,d.$G)("settings"),{toast:u}=(0,_.p)(),[m,x]=(0,c.useState)(!1),[h,j]=(0,c.useState)(""),v=(0,f.q)(),y=()=>{x(!0),n.dJ.post("/settings/extensions/".concat(a.id,"/license"),{license:h,server_id:r}).then(()=>{u({title:o("success"),description:o("subscriptions.subcard.success")}),v.emit("SUBSCRIPTION_REFRESH_"+a.id),t(!1)}).catch(()=>{u({title:o("error"),description:o("subscriptions.subcard.error"),variant:"destructive"})}).finally(()=>{x(!1)})};return(0,i.jsx)(g.Vq,{onOpenChange:e=>t(e),open:s,children:(0,i.jsxs)(g.cZ,{className:"sm:max-w-[525px]",children:[(0,i.jsxs)(g.fK,{children:[(0,i.jsx)(g.$N,{children:o("subscriptions.license_dialog.title")}),(0,i.jsx)(g.Be,{children:o("subscriptions.license_dialog.description")})]}),(0,i.jsxs)("div",{className:"mt-3 grid w-full items-center gap-1.5",children:[(0,i.jsx)(N._,{htmlFor:"license",children:o("subscriptions.license_dialog.license")}),(0,i.jsx)(w.g,{id:"license",onChange:e=>j(e.target.value),maxLength:750})]}),(0,i.jsxs)("div",{className:"mt-6 flex justify-end",children:[(0,i.jsx)(p.z,{variant:"outline",onClick:()=>t(!1),className:"mr-2",children:o("subscriptions.license_dialog.cancel")}),(0,i.jsxs)(p.z,{disabled:m,onClick:()=>y(),children:[m?(0,i.jsx)(b.P.spinner,{className:"mr-2 size-4 animate-spin"}):(0,i.jsx)(l.Z,{className:"mr-2 size-4"}),o("subscriptions.license_dialog.ok")]})]})]})})}var C=t(986);function R(){let{t:e}=(0,d.$G)("settings"),[s,t]=(0,c.useState)(!0),[a,l]=(0,c.useState)([]),[o,u]=(0,c.useState)(!1),[m,x]=(0,c.useState)({}),[g,j]=(0,c.useState)(!1),N=(0,f.q)(),v=()=>{n.dJ.get("/settings/subscriptions/liman").then(e=>{x(e.data),u(!0)}).catch(()=>{})},w=()=>{t(!0),n.dJ.get("/settings/subscriptions").then(e=>{200===e.status&&l(e.data)}).catch(e=>{404===e.response.status&&u(!1)}).finally(()=>{t(!1)})};(0,c.useEffect)(()=>(w(),v(),N.on("LIMAN_SUBSCRIPTION_REFRESH",()=>{v()}),()=>{N.off("LIMAN_SUBSCRIPTION_REFRESH")}),[]);let _=()=>{let e=(m.coverage_end-m.coverage_start)/864e5;return 100-(Date.now()-m.coverage_start)/864e5/e*100};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(C.Z,{title:e("subscriptions.title"),description:e("subscriptions.description")}),(0,i.jsxs)("div",{className:"h-full flex-1 flex-col p-8 pt-0 md:flex",children:[(0,i.jsx)("h3",{className:"mb-5 text-xl font-bold tracking-tight",children:e("subscriptions.liman")}),(0,i.jsxs)(h.Zb,{className:"mb-10",children:[o&&_()>0&&(0,i.jsxs)("div",{className:"flex items-center gap-16",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-5 p-6",children:[(0,i.jsxs)("div",{className:"item",children:[(0,i.jsx)("h4",{className:"text-2xl font-bold tracking-tight",children:e("subscriptions.issued_no")}),(0,i.jsx)("span",{className:"text-foreground/70",children:m.issued_no})]}),(0,i.jsxs)("div",{className:"item",children:[(0,i.jsx)("h4",{className:"text-2xl font-bold tracking-tight",children:e("subscriptions.issued")}),(0,i.jsx)("span",{className:"text-foreground/70",children:m.issued})]})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-5 p-6",children:[(0,i.jsxs)("div",{className:"item",children:[(0,i.jsx)("h4",{className:"text-2xl font-bold tracking-tight",children:e("subscriptions.package_type")}),(0,i.jsx)("span",{className:"text-foreground/70",children:m.package_type})]}),(0,i.jsxs)("div",{className:"item",children:[(0,i.jsx)("h4",{className:"text-2xl font-bold tracking-tight",children:e("subscriptions.start_time")}),(0,i.jsx)("span",{className:"text-foreground/70",children:new Date(m.membership_start_time).toLocaleDateString()})]})]}),(0,i.jsx)("div",{className:"radial min-w-[180px] border-l py-3 pl-6",children:(0,i.jsx)("div",{className:"radial-progress min-w-[180px]",style:{"--value":_(),color:6>_()&&"red","--size":"180px"},children:(0,i.jsxs)("b",{className:"font-semibold",children:[Math.floor(_()),"%"]})})}),(0,i.jsxs)("div",{className:"flex flex-col gap-5 p-6",children:[(0,i.jsxs)("div",{className:"item",children:[(0,i.jsx)("h4",{className:"text-2xl font-bold tracking-tight",children:e("subscriptions.support")}),(0,i.jsxs)("span",{className:"text-foreground/70",children:[new Date(m.coverage_start).toLocaleDateString()," ","-"," ",new Date(m.coverage_end).toLocaleDateString()]})]}),(0,i.jsxs)("div",{className:"item",children:[(0,i.jsx)("h4",{className:"text-2xl font-bold tracking-tight",children:e("subscriptions.remaining")}),(0,i.jsx)("span",{className:"text-foreground/70",children:Math.floor((m.coverage_end-Date.now())/864e5)})]})]})]}),(!o||0>_())&&(0,i.jsxs)("div",{className:"my-16 flex flex-col items-center justify-center gap-4",children:[(0,i.jsx)(b.P.spinner,{className:"size-12 text-red-500"}),(0,i.jsx)("h5",{className:"mb-1 font-semibold tracking-tight text-red-500",children:e("subscriptions.license_missing")}),(0,i.jsx)("p",{className:"text-center text-muted-foreground mb-3",children:e("subscriptions.license_features_disabled")}),(0,i.jsxs)(p.z,{onClick:()=>j(!0),children:[(0,i.jsx)(r,{className:"mr-2 size-4"})," ",e("subscriptions.add_license")]}),(0,i.jsx)(z,{open:g,setOpen:j})]})]}),a.length>0&&(0,i.jsx)("h3",{className:"mb-5 text-xl font-bold tracking-tight",children:e("subscriptions.extension")}),(0,i.jsxs)("div",{className:"grid gap-8 md:grid-cols-2 xl:grid-cols-3",children:[s&&(0,i.jsx)(y.O,{}),!s&&a.map(e=>(0,i.jsx)(k,{extension:e},e.id))]})]})]})}function z(e){let{open:s,setOpen:t}=e,{t:a}=(0,d.$G)("settings"),{toast:r}=(0,_.p)(),[o,u]=(0,c.useState)(!1),[m,x]=(0,c.useState)(""),h=(0,f.q)(),j=()=>{u(!0),n.dJ.post("/settings/subscriptions/liman",{license:m}).then(()=>{h.emit("LIMAN_SUBSCRIPTION_REFRESH"),r({title:a("success"),description:a("subscriptions.license_dialog.success")}),t(!1)}).catch(()=>{r({title:a("error"),description:a("subscriptions.license_dialog.error"),variant:"destructive"})}).finally(()=>{u(!1)})};return(0,i.jsx)(g.Vq,{onOpenChange:e=>t(e),open:s,children:(0,i.jsxs)(g.cZ,{className:"sm:max-w-[525px]",children:[(0,i.jsxs)(g.fK,{children:[(0,i.jsx)(g.$N,{children:a("subscriptions.license_dialog.title")}),(0,i.jsx)(g.Be,{children:a("subscriptions.license_dialog.description")})]}),(0,i.jsxs)("div",{className:"mt-3 grid w-full items-center gap-1.5",children:[(0,i.jsx)(N._,{htmlFor:"license",children:a("subscriptions.license_dialog.license")}),(0,i.jsx)(w.g,{id:"license",onChange:e=>x(e.target.value),maxLength:750})]}),(0,i.jsxs)("div",{className:"mt-6 flex justify-end",children:[(0,i.jsx)(p.z,{variant:"outline",onClick:()=>t(!1),className:"mr-2",children:a("subscriptions.license_dialog.cancel")}),(0,i.jsxs)(p.z,{disabled:o,onClick:()=>j(),children:[o?(0,i.jsx)(b.P.spinner,{className:"mr-2 size-4 animate-spin"}):(0,i.jsx)(l.Z,{className:"mr-2 size-4"}),a("subscriptions.license_dialog.ok")]})]})]})})}},9102:function(e,s,t){"use strict";t.d(s,{f:function(){return r}});var i=t(7462),n=t(7294),a=t(5320);let r=(0,n.forwardRef)((e,s)=>(0,n.createElement)(a.WV.label,(0,i.Z)({},e,{ref:s,onMouseDown:s=>{var t;null===(t=e.onMouseDown)||void 0===t||t.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault()}})))},9391:function(e,s,t){"use strict";function i(e){return{all:e=e||new Map,on:function(s,t){var i=e.get(s);i?i.push(t):e.set(s,[t])},off:function(s,t){var i=e.get(s);i&&(t?i.splice(i.indexOf(t)>>>0,1):e.set(s,[]))},emit:function(s,t){var i=e.get(s);i&&i.slice().map(function(e){e(t)}),(i=e.get("*"))&&i.slice().map(function(e){e(s,t)})}}}t.d(s,{Z:function(){return i}})}},function(e){e.O(0,[5059,2888,9774,179],function(){return e(e.s=2853)}),_N_E=e.O()}]);