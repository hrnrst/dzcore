(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6545],{4632:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(5711).Z)("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]])},9012:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/servers/[server_id]/access_logs",function(){return r(2483)}])},986:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(5893),l=r(9008),n=r.n(l);function s(e){let{title:t,description:r,rightSide:l}=e;return(0,a.jsxs)("div",{className:"flex-1 flex-col p-8 md:flex",children:[(0,a.jsx)(n(),{children:(0,a.jsx)("title",{children:"".concat(t," | DZ")})}),(0,a.jsxs)("div",{className:"flex items-center justify-between space-y-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:t}),(0,a.jsx)("p",{className:"text-muted-foreground",children:r})]}),l&&(0,a.jsx)("div",{className:"flex items-center",children:l})]})]})}},2483:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return er}});var a=r(5893),l=r(9774),n=r(4632),s=r(1163),o=r(7294),i=r(7421),c=r(7462),d=r(5360),u=r(5936),p=r(8771),f=r(6206),m=r(7342),h=r(5320),g=r(334),x=r(1276),_=r(8990);let v="Accordion",y=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[w,b,j]=(0,u.B)(v),[E,N]=(0,d.b)(v,[j,g.p_]),A=(0,g.p_)(),k=o.forwardRef((e,t)=>{let{type:r,...a}=e;return o.createElement(w.Provider,{scope:e.__scopeAccordion},"multiple"===r?o.createElement(S,(0,c.Z)({},a,{ref:t})):o.createElement(V,(0,c.Z)({},a,{ref:t})))});k.propTypes={type(e){let t=e.value||e.defaultValue;return e.type&&!["single","multiple"].includes(e.type)?Error("Invalid prop `type` supplied to `Accordion`. Expected one of `single | multiple`."):"multiple"===e.type&&"string"==typeof t?Error("Invalid prop `type` supplied to `Accordion`. Expected `single` when `defaultValue` or `value` is type `string`."):"single"===e.type&&Array.isArray(t)?Error("Invalid prop `type` supplied to `Accordion`. Expected `multiple` when `defaultValue` or `value` is type `string[]`."):null}};let[C,Z]=E(v),[I,R]=E(v,{collapsible:!1}),V=o.forwardRef((e,t)=>{let{value:r,defaultValue:a,onValueChange:l=()=>{},collapsible:n=!1,...s}=e,[i,d]=(0,m.T)({prop:r,defaultProp:a,onChange:l});return o.createElement(C,{scope:e.__scopeAccordion,value:i?[i]:[],onItemOpen:d,onItemClose:o.useCallback(()=>n&&d(""),[n,d])},o.createElement(I,{scope:e.__scopeAccordion,collapsible:n},o.createElement(D,(0,c.Z)({},s,{ref:t}))))}),S=o.forwardRef((e,t)=>{let{value:r,defaultValue:a,onValueChange:l=()=>{},...n}=e,[s=[],i]=(0,m.T)({prop:r,defaultProp:a,onChange:l}),d=o.useCallback(e=>i((t=[])=>[...t,e]),[i]),u=o.useCallback(e=>i((t=[])=>t.filter(t=>t!==e)),[i]);return o.createElement(C,{scope:e.__scopeAccordion,value:s,onItemOpen:d,onItemClose:u},o.createElement(I,{scope:e.__scopeAccordion,collapsible:!0},o.createElement(D,(0,c.Z)({},n,{ref:t}))))}),[O,z]=E(v),D=o.forwardRef((e,t)=>{let{__scopeAccordion:r,disabled:a,dir:l,orientation:n="vertical",...s}=e,i=o.useRef(null),d=(0,p.e)(i,t),u=b(r),m="ltr"===(0,_.gm)(l),g=(0,f.M)(e.onKeyDown,e=>{var t;if(!y.includes(e.key))return;let r=e.target,a=u().filter(e=>{var t;return!(null!==(t=e.ref.current)&&void 0!==t&&t.disabled)}),l=a.findIndex(e=>e.ref.current===r),s=a.length;if(-1===l)return;e.preventDefault();let o=l,i=s-1,c=()=>{(o=l+1)>i&&(o=0)},d=()=>{(o=l-1)<0&&(o=i)};switch(e.key){case"Home":o=0;break;case"End":o=i;break;case"ArrowRight":"horizontal"===n&&(m?c():d());break;case"ArrowDown":"vertical"===n&&c();break;case"ArrowLeft":"horizontal"===n&&(m?d():c());break;case"ArrowUp":"vertical"===n&&d()}null===(t=a[o%s].ref.current)||void 0===t||t.focus()});return o.createElement(O,{scope:r,disabled:a,direction:l,orientation:n},o.createElement(w.Slot,{scope:r},o.createElement(h.WV.div,(0,c.Z)({},s,{"data-orientation":n,ref:d,onKeyDown:a?void 0:g}))))}),K="AccordionItem",[T,M]=E(K),q=o.forwardRef((e,t)=>{let{__scopeAccordion:r,value:a,...l}=e,n=z(K,r),s=Z(K,r),i=A(r),d=(0,x.M)(),u=a&&s.value.includes(a)||!1,p=n.disabled||e.disabled;return o.createElement(T,{scope:r,open:u,disabled:p,triggerId:d},o.createElement(g.fC,(0,c.Z)({"data-orientation":n.orientation,"data-state":$(u)},i,l,{ref:t,disabled:p,open:u,onOpenChange:e=>{e?s.onItemOpen(a):s.onItemClose(a)}})))}),H=o.forwardRef((e,t)=>{let{__scopeAccordion:r,...a}=e,l=z(v,r),n=M("AccordionHeader",r);return o.createElement(h.WV.h3,(0,c.Z)({"data-orientation":l.orientation,"data-state":$(n.open),"data-disabled":n.disabled?"":void 0},a,{ref:t}))}),P="AccordionTrigger",J=o.forwardRef((e,t)=>{let{__scopeAccordion:r,...a}=e,l=z(v,r),n=M(P,r),s=R(P,r),i=A(r);return o.createElement(w.ItemSlot,{scope:r},o.createElement(g.xz,(0,c.Z)({"aria-disabled":n.open&&!s.collapsible||void 0,"data-orientation":l.orientation,id:n.triggerId},i,a,{ref:t})))}),L=o.forwardRef((e,t)=>{let{__scopeAccordion:r,...a}=e,l=z(v,r),n=M("AccordionContent",r),s=A(r);return o.createElement(g.VY,(0,c.Z)({role:"region","aria-labelledby":n.triggerId,"data-orientation":l.orientation},s,a,{ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}}))});function $(e){return e?"open":"closed"}var F=r(8971),G=r(7327);let B=o.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)(q,{ref:t,className:(0,G.cn)("border-b",r),...l})});B.displayName="AccordionItem";let U=o.forwardRef((e,t)=>{let{className:r,children:l,...n}=e;return(0,a.jsx)(H,{className:"flex",children:(0,a.jsxs)(J,{ref:t,className:(0,G.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",r),...n,children:[l,(0,a.jsx)(F.Z,{className:"size-4 transition-transform duration-200"})]})})});U.displayName=J.displayName;let W=o.forwardRef((e,t)=>{let{className:r,children:l,...n}=e;return(0,a.jsx)(L,{ref:t,className:(0,G.cn)("overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",r),...n,children:(0,a.jsx)("div",{className:"pb-4 pt-0",children:l})})});W.displayName=L.displayName;var X=r(5282),Y=r(2532),Q=r(7622),ee=r(986),et=r(2561);function er(){let e=(0,s.useRouter)(),[t,r]=(0,o.useState)(!0),[n,c]=(0,o.useState)([]),{i18n:d}=(0,i.$G)(),{t:u}=(0,i.$G)("servers"),p=[{accessorKey:"extension_id",header:e=>{let{column:t}=e;return(0,a.jsx)(Y.p,{column:t,title:u("access_logs.extension_id.title")})},title:u("access_logs.extension_id.title"),cell:e=>{let{row:t}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ea,{id:t.original.log_id})," ",t.original.extension_id]})}},{accessorKey:"view",header:e=>{let{column:t}=e;return(0,a.jsx)(Y.p,{column:t,title:u("access_logs.view.title")})},title:u("access_logs.view.title")},{accessorKey:"user_id",header:e=>{let{column:t}=e;return(0,a.jsx)(Y.p,{column:t,title:u("access_logs.user_id.title")})},title:u("access_logs.user_id.title")},{accessorKey:"ts",accessorFn:e=>new Date(1e3*e.ts).toLocaleDateString(d.language,{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}),header:e=>{let{column:t}=e;return(0,a.jsx)(Y.p,{column:t,title:u("access_logs.ts.title")})},title:u("access_logs.ts.title"),sortingFn:G.aS}],f=()=>{e.query.server_id&&l.dJ.get("/servers/".concat(e.query.server_id,"/access_logs")).then(e=>{c(e.data),r(!1)})};return(0,o.useEffect)(()=>{f()},[e.query.server_id]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ee.Z,{title:u("access_logs.page_header.title"),description:u("access_logs.page_header.description")}),(0,a.jsx)(X.Z,{columns:p,data:n,loading:t,selectable:!1})]})}function ea(e){let{id:t}=e,r=(0,s.useRouter)(),[c,d]=(0,o.useState)(!0),[u,p]=(0,o.useState)([]),{t:f}=(0,i.$G)("servers"),m=()=>{d(!0),l.dJ.get("/servers/".concat(r.query.server_id,"/access_logs/").concat(t)).then(e=>{p(e.data),d(!1)})},h=e=>{try{return JSON.stringify(JSON.parse(e),null,2)}catch(t){return e}};return(0,a.jsxs)(Q.Vq,{children:[(0,a.jsx)(Q.hg,{asChild:!0,children:(0,a.jsx)(n.Z,{className:"size-4 cursor-pointer",onClick:()=>m()})}),(0,a.jsxs)(Q.cZ,{className:"max-h-[80vh] overflow-y-auto sm:max-w-[800px]",children:[(0,a.jsxs)(Q.fK,{children:[(0,a.jsx)(Q.$N,{children:f("access_logs.dialog.title")}),(0,a.jsx)(Q.Be,{children:f("access_logs.dialog.description")})]}),c?(0,a.jsx)(et.O,{className:"h-64 w-full"}):(0,a.jsx)(k,{type:"single",collapsible:!0,className:"block w-full",children:null==u?void 0:u.map((e,t)=>(0,a.jsxs)(B,{value:t+1,children:[(0,a.jsx)(U,{children:e.title}),(0,a.jsx)(W,{children:(0,a.jsx)("pre",{className:"max-w-[720px]",children:h(e.message)})})]},t+1))})]})]})}}},function(e){e.O(0,[5059,3265,5855,2888,9774,179],function(){return e(e.s=9012)}),_N_E=e.O()}]);