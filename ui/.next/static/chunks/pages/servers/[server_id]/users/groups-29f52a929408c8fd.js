(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4570],{1325:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(5711).Z)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},9947:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/servers/[server_id]/users/groups",function(){return r(1071)}])},2766:function(e,s,r){"use strict";r.d(s,{NI:function(){return x},Wi:function(){return d},l0:function(){return o},lX:function(){return g},pf:function(){return h},xJ:function(){return p},zG:function(){return j}});var t=r(5893),n=r(7294),i=r(8426),c=r(7536),a=r(7327),u=r(2297);let o=c.RV,l=n.createContext({}),d=e=>{let{...s}=e;return(0,t.jsx)(l.Provider,{value:{name:s.name},children:(0,t.jsx)(c.Qr,{...s})})},m=()=>{let e=n.useContext(l),s=n.useContext(f),{getFieldState:r,formState:t}=(0,c.Gc)(),i=r(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:a}=s;return{id:a,name:e.name,formItemId:"".concat(a,"-form-item"),formDescriptionId:"".concat(a,"-form-item-description"),formMessageId:"".concat(a,"-form-item-message"),...i}},f=n.createContext({}),p=n.forwardRef((e,s)=>{let{className:r,...i}=e,c=n.useId();return(0,t.jsx)(f.Provider,{value:{id:c},children:(0,t.jsx)("div",{ref:s,className:(0,a.cn)("space-y-2",r),...i})})});p.displayName="FormItem";let g=n.forwardRef((e,s)=>{let{className:r,...n}=e,{error:i,formItemId:c}=m();return(0,t.jsx)(u._,{ref:s,className:(0,a.cn)(i&&"text-destructive",r),htmlFor:c,...n})});g.displayName="FormLabel";let x=n.forwardRef((e,s)=>{let{...r}=e,{error:n,formItemId:c,formDescriptionId:a,formMessageId:u}=m();return(0,t.jsx)(i.g7,{ref:s,id:c,"aria-describedby":n?"".concat(a," ").concat(u):"".concat(a),"aria-invalid":!!n,...r})});x.displayName="FormControl";let h=n.forwardRef((e,s)=>{let{className:r,...n}=e,{formDescriptionId:i}=m();return(0,t.jsx)("p",{ref:s,id:i,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});h.displayName="FormDescription";let j=n.forwardRef((e,s)=>{let{className:r,children:n,...i}=e,{error:c,formMessageId:u}=m(),o=c?String(null==c?void 0:c.message):n;return o?(0,t.jsx)("p",{ref:s,id:u,className:(0,a.cn)("text-sm font-medium text-destructive",r),...i,children:o}):null});j.displayName="FormMessage"},2297:function(e,s,r){"use strict";r.d(s,{_:function(){return o}});var t=r(5893),n=r(7294),i=r(9102),c=r(5139),a=r(7327);let u=(0,c.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=n.forwardRef((e,s)=>{let{className:r,...n}=e;return(0,t.jsx)(i.f,{ref:s,className:(0,a.cn)(u(),r),...n})});o.displayName=i.f.displayName},986:function(e,s,r){"use strict";r.d(s,{Z:function(){return c}});var t=r(5893),n=r(9008),i=r.n(n);function c(e){let{title:s,description:r,rightSide:n}=e;return(0,t.jsxs)("div",{className:"flex-1 flex-col p-8 md:flex",children:[(0,t.jsx)(i(),{children:(0,t.jsx)("title",{children:"".concat(s," | DZ")})}),(0,t.jsxs)("div",{className:"flex items-center justify-between space-y-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:s}),(0,t.jsx)("p",{className:"text-muted-foreground",children:r})]}),n&&(0,t.jsx)("div",{className:"flex items-center",children:n})]})]})}},5050:function(e,s,r){"use strict";r.d(s,{p:function(){return i}}),r(7294);var t=r(7421),n=r(4712);function i(){let{t:e}=(0,t.$G)("common");return{toast:s=>{let{title:r,description:t,variant:i}=s,c={description:t,duration:6e3,dismissible:!0},a="";switch(r==e("information")?a="info":r==e("success")?a="success":r==e("error")?a="error":r==e("warning")&&(a="warning"),i&&(a=i),a){case"success":return n.A.success(r,c);case"error":case"destructive":return n.A.error(r,c);case"warning":return n.A.warning(r,c);case"info":return n.A.info(r,c);default:return(0,n.A)(r,c)}}}}},8946:function(e,s,r){"use strict";r.d(s,{q:function(){return n}});let t=(0,r(9391).Z)(),n=()=>t},1071:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return b}});var t=r(5893),n=r(6660),i=r(9774),c=r(6312),a=r(1325),u=r(1163),o=r(7294),l=r(7536),d=r(7421),m=r(1604),f=r(2766),p=r(7249),g=r(5282),x=r(2532),h=r(7622),j=r(5037),_=r(2297),v=r(986),N=r(5050),y=r(8946),w=r(7327);function b(){let e=(0,u.useRouter)(),[s,r]=(0,o.useState)(!0),[c,a]=(0,o.useState)([]),{t:l}=(0,d.$G)("servers"),m=(0,n.S)(),f=(0,y.q)(),p=[{accessorKey:"group",header:e=>{let{column:s}=e;return(0,t.jsx)(x.p,{column:s,title:l("users.groups.accessor_group_title")})},title:l("users.groups.accessor_group_title")}],h=()=>{e.query.server_id&&i.dJ.get("/servers/".concat(e.query.server_id,"/users/groups")).then(e=>{a(e.data),r(!1)})};return(0,o.useEffect)(()=>{h()},[e.query.server_id]),(0,o.useEffect)(()=>(f.on("REFETCH_LOCAL_GROUPS",()=>{h()}),()=>f.off("REFETCH_LOCAL_GROUPS")),[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Z,{title:l("users.groups.page_header.title"),description:l("users.groups.page_header.description")}),(0,t.jsx)(g.Z,{columns:p,data:c,loading:s,selectable:!1,children:!(m.selectedData.type&&m.selectedData.type.includes("winrm"))&&(0,t.jsx)(F,{})})]})}function F(){let{t:e}=(0,d.$G)("servers"),s=m.Ry({group_name:m.Z_().min(2,{message:e("users.groups.form_message.min")}).max(50,{message:e("users.groups.form_message.max")})}),r=(0,u.useRouter)(),{toast:n}=(0,N.p)(),g=(0,y.q)(),x=(0,l.cI)({resolver:(0,c.F)(s),defaultValues:{group_name:""}}),[v,b]=(0,o.useState)(!1);return(0,t.jsxs)(h.Vq,{onOpenChange:e=>b(e),open:v,children:[(0,t.jsx)(h.hg,{asChild:!0,children:(0,t.jsxs)(p.z,{variant:"outline",size:"sm",className:"ml-auto h-8 lg:flex",children:[(0,t.jsx)(a.Z,{className:"mr-2 size-4"}),e("users.groups.dialog.add_btn")]})}),(0,t.jsxs)(h.cZ,{className:"sm:max-w-[525px]",children:[(0,t.jsxs)(h.fK,{children:[(0,t.jsx)(h.$N,{children:e("users.groups.dialog.title")}),(0,t.jsx)(h.Be,{children:e("users.groups.dialog.description")})]}),(0,t.jsx)(f.l0,{...x,children:(0,t.jsxs)("form",{onSubmit:x.handleSubmit(s=>{i.dJ.post("/servers/".concat(r.query.server_id,"/users/groups"),s).then(s=>{200===s.status?(n({title:e("users.groups.toasts.success.title"),description:e("users.groups.toasts.success.description")}),g.emit("REFETCH_LOCAL_GROUPS"),b(!1),x.reset()):n({title:e("users.groups.toasts.fail.title"),description:e("users.groups.toasts.fail.description"),variant:"destructive"})}).catch(s=>{(0,w.FB)(s,x)||n({title:e("users.groups.toasts.fail.title"),description:e("users.groups.toasts.fail.description"),variant:"destructive"})})}),className:"space-y-5",children:[(0,t.jsx)(f.Wi,{control:x.control,name:"group_name",render:s=>{let{field:r}=s;return(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(_._,{htmlFor:"group_name",className:"text-right",children:e("users.groups.dialog.form_label")}),(0,t.jsxs)("div",{className:"col-span-3",children:[(0,t.jsx)(j.I,{id:"group_name",...r}),(0,t.jsx)(f.zG,{className:"mt-1"})]})]})}}),(0,t.jsx)(h.cN,{children:(0,t.jsxs)(p.z,{type:"submit",children:[(0,t.jsx)(a.Z,{className:"mr-2 size-4"}),e("users.groups.dialog.create_btn")]})})]})})]})]})}},9391:function(e,s,r){"use strict";function t(e){return{all:e=e||new Map,on:function(s,r){var t=e.get(s);t?t.push(r):e.set(s,[r])},off:function(s,r){var t=e.get(s);t&&(r?t.splice(t.indexOf(r)>>>0,1):e.set(s,[]))},emit:function(s,r){var t=e.get(s);t&&t.slice().map(function(e){e(r)}),(t=e.get("*"))&&t.slice().map(function(e){e(s,r)})}}}r.d(s,{Z:function(){return t}})}},function(e){e.O(0,[5059,3265,3051,5855,2888,9774,179],function(){return e(e.s=9947)}),_N_E=e.O()}]);