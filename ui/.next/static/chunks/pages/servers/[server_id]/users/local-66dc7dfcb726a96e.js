(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2270],{1325:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,r(5711).Z)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},8766:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/servers/[server_id]/users/local",function(){return r(8465)}])},2766:function(e,s,r){"use strict";r.d(s,{NI:function(){return h},Wi:function(){return d},l0:function(){return o},lX:function(){return x},pf:function(){return g},xJ:function(){return p},zG:function(){return _}});var t=r(5893),a=r(7294),n=r(8426),i=r(7536),c=r(7327),l=r(2297);let o=i.RV,u=a.createContext({}),d=e=>{let{...s}=e;return(0,t.jsx)(u.Provider,{value:{name:s.name},children:(0,t.jsx)(i.Qr,{...s})})},m=()=>{let e=a.useContext(u),s=a.useContext(f),{getFieldState:r,formState:t}=(0,i.Gc)(),n=r(e.name,t);if(!e)throw Error("useFormField should be used within <FormField>");let{id:c}=s;return{id:c,name:e.name,formItemId:"".concat(c,"-form-item"),formDescriptionId:"".concat(c,"-form-item-description"),formMessageId:"".concat(c,"-form-item-message"),...n}},f=a.createContext({}),p=a.forwardRef((e,s)=>{let{className:r,...n}=e,i=a.useId();return(0,t.jsx)(f.Provider,{value:{id:i},children:(0,t.jsx)("div",{ref:s,className:(0,c.cn)("space-y-2",r),...n})})});p.displayName="FormItem";let x=a.forwardRef((e,s)=>{let{className:r,...a}=e,{error:n,formItemId:i}=m();return(0,t.jsx)(l._,{ref:s,className:(0,c.cn)(n&&"text-destructive",r),htmlFor:i,...a})});x.displayName="FormLabel";let h=a.forwardRef((e,s)=>{let{...r}=e,{error:a,formItemId:i,formDescriptionId:c,formMessageId:l}=m();return(0,t.jsx)(n.g7,{ref:s,id:i,"aria-describedby":a?"".concat(c," ").concat(l):"".concat(c),"aria-invalid":!!a,...r})});h.displayName="FormControl";let g=a.forwardRef((e,s)=>{let{className:r,...a}=e,{formDescriptionId:n}=m();return(0,t.jsx)("p",{ref:s,id:n,className:(0,c.cn)("text-sm text-muted-foreground",r),...a})});g.displayName="FormDescription";let _=a.forwardRef((e,s)=>{let{className:r,children:a,...n}=e,{error:i,formMessageId:l}=m(),o=i?String(null==i?void 0:i.message):a;return o?(0,t.jsx)("p",{ref:s,id:l,className:(0,c.cn)("text-sm font-medium text-destructive",r),...n,children:o}):null});_.displayName="FormMessage"},2297:function(e,s,r){"use strict";r.d(s,{_:function(){return o}});var t=r(5893),a=r(7294),n=r(9102),i=r(5139),c=r(7327);let l=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(n.f,{ref:s,className:(0,c.cn)(l(),r),...a})});o.displayName=n.f.displayName},986:function(e,s,r){"use strict";r.d(s,{Z:function(){return i}});var t=r(5893),a=r(9008),n=r.n(a);function i(e){let{title:s,description:r,rightSide:a}=e;return(0,t.jsxs)("div",{className:"flex-1 flex-col p-8 md:flex",children:[(0,t.jsx)(n(),{children:(0,t.jsx)("title",{children:"".concat(s," | DZ")})}),(0,t.jsxs)("div",{className:"flex items-center justify-between space-y-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:s}),(0,t.jsx)("p",{className:"text-muted-foreground",children:r})]}),a&&(0,t.jsx)("div",{className:"flex items-center",children:a})]})]})}},5050:function(e,s,r){"use strict";r.d(s,{p:function(){return n}}),r(7294);var t=r(7421),a=r(4712);function n(){let{t:e}=(0,t.$G)("common");return{toast:s=>{let{title:r,description:t,variant:n}=s,i={description:t,duration:6e3,dismissible:!0},c="";switch(r==e("information")?c="info":r==e("success")?c="success":r==e("error")?c="error":r==e("warning")&&(c="warning"),n&&(c=n),c){case"success":return a.A.success(r,i);case"error":case"destructive":return a.A.error(r,i);case"warning":return a.A.warning(r,i);case"info":return a.A.info(r,i);default:return(0,a.A)(r,i)}}}}},8946:function(e,s,r){"use strict";r.d(s,{q:function(){return a}});let t=(0,r(9391).Z)(),a=()=>t},8465:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return b}});var t=r(5893),a=r(6660),n=r(9774),i=r(6312),c=r(1325),l=r(1163),o=r(7294),u=r(7536),d=r(7421),m=r(1604),f=r(2766),p=r(7249),x=r(5282),h=r(2532),g=r(7622),_=r(5037),j=r(2297),v=r(986),w=r(5050),N=r(8946),y=r(7327);function b(){let e=(0,l.useRouter)(),[s,r]=(0,o.useState)(!0),[i,c]=(0,o.useState)([]),{t:u}=(0,d.$G)("servers"),m=(0,a.S)(),f=(0,N.q)(),p=[{accessorKey:"user",header:e=>{let{column:s}=e;return(0,t.jsx)(h.p,{column:s,title:u("users.local.accessor_user_title")})},title:u("users.local.accessor_user_title")}],g=()=>{e.query.server_id&&n.dJ.get("/servers/".concat(e.query.server_id,"/users/local")).then(e=>{c(e.data),r(!1)})};return(0,o.useEffect)(()=>{g()},[e.query.server_id]),(0,o.useEffect)(()=>(f.on("REFETCH_LOCAL_USERS",()=>{g()}),()=>f.off("REFETCH_LOCAL_USERS")),[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Z,{title:u("users.local.page_header.title"),description:u("users.local.page_header.description")}),(0,t.jsx)(x.Z,{columns:p,data:i,loading:s,selectable:!1,children:!(m.selectedData.type&&m.selectedData.type.includes("winrm"))&&(0,t.jsx)(F,{})})]})}function F(){let e=(0,l.useRouter)(),{toast:s}=(0,w.p)(),r=(0,N.q)(),{t:a}=(0,d.$G)("servers"),x=m.Ry({username:m.Z_().min(2,{message:a("users.local.form_message.username.min")}).max(50,{message:a("users.local.form_message.username.max")}),password:m.Z_().min(8,{message:a("users.local.form_message.password.min")}).max(50,{message:a("users.local.form_message.password.min")}),password_confirmation:m.Z_()}).refine(e=>e.password===e.password_confirmation,{message:a("users.local.form_message.error_message"),path:["password_confirmation"]}),h=(0,u.cI)({resolver:(0,i.F)(x),defaultValues:{username:"",password:"",password_confirmation:""}}),[v,b]=(0,o.useState)(!1);return(0,t.jsxs)(g.Vq,{onOpenChange:e=>b(e),open:v,children:[(0,t.jsx)(g.hg,{asChild:!0,children:(0,t.jsxs)(p.z,{variant:"outline",size:"sm",className:"ml-auto h-8 lg:flex",children:[(0,t.jsx)(c.Z,{className:"mr-2 size-4"}),a("users.local.dialog.add_btn")]})}),(0,t.jsxs)(g.cZ,{className:"sm:max-w-[525px]",children:[(0,t.jsxs)(g.fK,{children:[(0,t.jsxs)(g.$N,{children:[" ",a("users.local.dialog.title")]}),(0,t.jsx)(g.Be,{children:a("users.local.dialog.description")})]}),(0,t.jsx)(f.l0,{...h,children:(0,t.jsxs)("form",{onSubmit:h.handleSubmit(t=>{n.dJ.post("/servers/".concat(e.query.server_id,"/users/local"),t).then(e=>{200===e.status?(s({title:a("users.local.toasts.success.title"),description:a("users.local.toasts.success.description")}),r.emit("REFETCH_LOCAL_USERS"),b(!1),h.reset()):s({title:a("users.local.toasts.fail.title"),description:a("users.local.toasts.fail.description"),variant:"destructive"})}).catch(e=>{(0,y.FB)(e,h)||s({title:a("users.local.toasts.fail.title"),description:a("users.local.toasts.fail.description"),variant:"destructive"})})}),className:"space-y-5",children:[(0,t.jsx)(f.Wi,{control:h.control,name:"username",render:e=>{let{field:s}=e;return(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(j._,{htmlFor:"username",className:"text-right",children:a("users.local.dialog.form_labels.username")}),(0,t.jsxs)("div",{className:"col-span-3",children:[(0,t.jsx)(_.I,{id:"username",...s}),(0,t.jsx)(f.zG,{className:"mt-1"})]})]})}}),(0,t.jsx)(f.Wi,{control:h.control,name:"password",render:e=>{let{field:s}=e;return(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(j._,{htmlFor:"password",className:"text-right",children:a("users.local.dialog.form_labels.password")}),(0,t.jsxs)("div",{className:"col-span-3",children:[(0,t.jsx)(_.I,{id:"password",...s,className:"col-span-3",type:"password"}),(0,t.jsx)(f.zG,{className:"mt-1"})]})]})}}),(0,t.jsx)(f.Wi,{control:h.control,name:"password_confirmation",render:e=>{let{field:s}=e;return(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(j._,{htmlFor:"password_confirmation",className:"text-right",children:a("users.local.dialog.form_labels.confirm_password")}),(0,t.jsxs)("div",{className:"col-span-3",children:[(0,t.jsx)(_.I,{id:"password_confirmation",...s,className:"col-span-3",type:"password"}),(0,t.jsx)(f.zG,{className:"mt-1"})]})]})}}),(0,t.jsx)(g.cN,{children:(0,t.jsxs)(p.z,{type:"submit",children:[(0,t.jsx)(c.Z,{className:"mr-2 size-4"}),a("users.local.dialog.create_btn")]})})]})})]})]})}},9391:function(e,s,r){"use strict";function t(e){return{all:e=e||new Map,on:function(s,r){var t=e.get(s);t?t.push(r):e.set(s,[r])},off:function(s,r){var t=e.get(s);t&&(r?t.splice(t.indexOf(r)>>>0,1):e.set(s,[]))},emit:function(s,r){var t=e.get(s);t&&t.slice().map(function(e){e(r)}),(t=e.get("*"))&&t.slice().map(function(e){e(s,r)})}}}r.d(s,{Z:function(){return t}})}},function(e){e.O(0,[5059,3265,3051,5855,2888,9774,179],function(){return e(e.s=8766)}),_N_E=e.O()}]);