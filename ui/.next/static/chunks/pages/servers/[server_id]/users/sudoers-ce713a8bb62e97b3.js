(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1902],{2536:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(5711).Z)("CircleMinus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]])},1325:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t(5711).Z)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},1720:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/servers/[server_id]/users/sudoers",function(){return t(1862)}])},2766:function(e,s,t){"use strict";t.d(s,{NI:function(){return p},Wi:function(){return u},l0:function(){return o},lX:function(){return x},pf:function(){return g},xJ:function(){return h},zG:function(){return v}});var r=t(5893),n=t(7294),i=t(8426),a=t(7536),c=t(7327),l=t(2297);let o=a.RV,d=n.createContext({}),u=e=>{let{...s}=e;return(0,r.jsx)(d.Provider,{value:{name:s.name},children:(0,r.jsx)(a.Qr,{...s})})},f=()=>{let e=n.useContext(d),s=n.useContext(m),{getFieldState:t,formState:r}=(0,a.Gc)(),i=t(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:c}=s;return{id:c,name:e.name,formItemId:"".concat(c,"-form-item"),formDescriptionId:"".concat(c,"-form-item-description"),formMessageId:"".concat(c,"-form-item-message"),...i}},m=n.createContext({}),h=n.forwardRef((e,s)=>{let{className:t,...i}=e,a=n.useId();return(0,r.jsx)(m.Provider,{value:{id:a},children:(0,r.jsx)("div",{ref:s,className:(0,c.cn)("space-y-2",t),...i})})});h.displayName="FormItem";let x=n.forwardRef((e,s)=>{let{className:t,...n}=e,{error:i,formItemId:a}=f();return(0,r.jsx)(l._,{ref:s,className:(0,c.cn)(i&&"text-destructive",t),htmlFor:a,...n})});x.displayName="FormLabel";let p=n.forwardRef((e,s)=>{let{...t}=e,{error:n,formItemId:a,formDescriptionId:c,formMessageId:l}=f();return(0,r.jsx)(i.g7,{ref:s,id:a,"aria-describedby":n?"".concat(c," ").concat(l):"".concat(c),"aria-invalid":!!n,...t})});p.displayName="FormControl";let g=n.forwardRef((e,s)=>{let{className:t,...n}=e,{formDescriptionId:i}=f();return(0,r.jsx)("p",{ref:s,id:i,className:(0,c.cn)("text-sm text-muted-foreground",t),...n})});g.displayName="FormDescription";let v=n.forwardRef((e,s)=>{let{className:t,children:n,...i}=e,{error:a,formMessageId:l}=f(),o=a?String(null==a?void 0:a.message):n;return o?(0,r.jsx)("p",{ref:s,id:l,className:(0,c.cn)("text-sm font-medium text-destructive",t),...i,children:o}):null});v.displayName="FormMessage"},1648:function(e,s,t){"use strict";t.d(s,{X:function(){return l}});var r=t(5893),n=t(7294),i=t(6069),a=t(3742),c=t(7327);let l=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)(i.fC,{ref:s,className:(0,c.cn)("peer size-4 shrink-0 overflow-hidden rounded-full border border-primary ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary/75 data-[state=checked]:text-primary-foreground",t),...n,children:(0,r.jsx)(i.z$,{className:(0,c.cn)("flex items-center justify-center rounded-full text-current"),children:(0,r.jsx)(a.Z,{className:"size-full"})})})});l.displayName=i.fC.displayName},2297:function(e,s,t){"use strict";t.d(s,{_:function(){return o}});var r=t(5893),n=t(7294),i=t(9102),a=t(5139),c=t(7327);let l=(0,a.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,r.jsx)(i.f,{ref:s,className:(0,c.cn)(l(),t),...n})});o.displayName=i.f.displayName},986:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});var r=t(5893),n=t(9008),i=t.n(n);function a(e){let{title:s,description:t,rightSide:n}=e;return(0,r.jsxs)("div",{className:"flex-1 flex-col p-8 md:flex",children:[(0,r.jsx)(i(),{children:(0,r.jsx)("title",{children:"".concat(s," | DZ")})}),(0,r.jsxs)("div",{className:"flex items-center justify-between space-y-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:s}),(0,r.jsx)("p",{className:"text-muted-foreground",children:t})]}),n&&(0,r.jsx)("div",{className:"flex items-center",children:n})]})]})}},5050:function(e,s,t){"use strict";t.d(s,{p:function(){return i}}),t(7294);var r=t(7421),n=t(4712);function i(){let{t:e}=(0,r.$G)("common");return{toast:s=>{let{title:t,description:r,variant:i}=s,a={description:r,duration:6e3,dismissible:!0},c="";switch(t==e("information")?c="info":t==e("success")?c="success":t==e("error")?c="error":t==e("warning")&&(c="warning"),i&&(c=i),c){case"success":return n.A.success(t,a);case"error":case"destructive":return n.A.error(t,a);case"warning":return n.A.warning(t,a);case"info":return n.A.info(t,a);default:return(0,n.A)(t,a)}}}}},8946:function(e,s,t){"use strict";t.d(s,{q:function(){return n}});let r=(0,t(9391).Z)(),n=()=>r},1862:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return C}});var r=t(5893),n=t(9774),i=t(6312),a=t(2536),c=t(1325),l=t(1163),o=t(7294),d=t(7536),u=t(7421),f=t(1604),m=t(2766),h=t(2361),x=t(7249),p=t(1648),g=t(5282),v=t(2532),j=t(7622),b=t(5037),y=t(2297),_=t(986),N=t(5050),w=t(8946),k=t(7327);function C(){let e=(0,l.useRouter)(),[s,t]=(0,o.useState)(!0),[i,c]=(0,o.useState)([]),[d,f]=(0,o.useState)([]),m=(0,o.useRef)(),{toast:j}=(0,N.p)(),{t:b}=(0,u.$G)("servers"),y=(0,w.q)(),k=[{id:"select",header:e=>{let{table:s}=e;return(0,r.jsx)(p.X,{checked:s.getIsAllPageRowsSelected(),onCheckedChange:e=>s.toggleAllPageRowsSelected(!!e),"aria-label":"Select all",className:"translate-y-[2px]"})},cell:e=>{let{row:s}=e;return(0,r.jsx)(p.X,{checked:s.getIsSelected(),onCheckedChange:e=>s.toggleSelected(!!e),"aria-label":"Select row",className:"translate-y-[2px]"})},enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:e=>{let{column:s}=e;return(0,r.jsx)(v.p,{column:s,title:b("users.sudoers.accessor_name_title")})},title:b("users.sudoers.accessor_name_title")},{accessorKey:"access",header:e=>{let{column:s}=e;return(0,r.jsx)(v.p,{column:s,title:b("users.sudoers.accessor_access_title")})},title:b("users.sudoers.accessor_access_title")}],C=()=>{e.query.server_id&&n.dJ.get("/servers/".concat(e.query.server_id,"/users/sudoers")).then(e=>{c(e.data),t(!1)})};(0,o.useEffect)(()=>{C()},[e.query.server_id]),(0,o.useEffect)(()=>(y.on("REFETCH_SUDOERS",()=>{C()}),()=>y.off("REFETCH_SUDOERS")),[]);let R=()=>{(null==d?void 0:d.length)&&n.dJ.delete("/servers/".concat(e.query.server_id,"/users/sudoers"),{data:{names:d.map(e=>e.name)}}).then(e=>{if(200===e.status){var s;j({title:b("users.sudoers.toasts.success.title"),description:b("users.sudoers.toasts.success.description")}),C(),null===(s=m.current)||void 0===s||s.resetRowSelection(),f([])}else j({title:b("users.sudoers.toasts.fail.title"),description:b("users.sudoers.toasts.fail.description"),variant:"destructive"})}).catch(()=>{j({title:b("users.sudoers.toasts.fail.title"),description:b("users.sudoers.toasts.fail.description"),variant:"destructive"})})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_.Z,{title:b("users.sudoers.page_header.title"),description:b("users.sudoers.page_header.description")}),(0,r.jsx)(g.Z,{columns:k,data:i,loading:s,selectable:!0,onSelectedRowsChange:e=>f(e),tableRef:m,children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(E,{}),(0,r.jsxs)(h.aR,{children:[(0,r.jsx)(h.vW,{asChild:!0,children:(0,r.jsxs)(x.z,{variant:"outline",size:"sm",className:"ml-auto h-8 lg:flex",disabled:!(null==d?void 0:d.length),children:[(0,r.jsx)(a.Z,{className:"mr-2 size-4"}),b("users.sudoers.alert_dialog.delete_btn")]})}),(0,r.jsxs)(h._T,{children:[(0,r.jsxs)(h.fY,{children:[(0,r.jsxs)(h.f$,{children:[" ",b("users.sudoers.alert_dialog.title")]}),(0,r.jsx)(h.yT,{children:b("users.sudoers.alert_dialog.description")})]}),(0,r.jsxs)(h.xo,{children:[(0,r.jsxs)(h.le,{children:[" ",b("users.sudoers.alert_dialog.cancel")]}),(0,r.jsx)(h.OL,{onClick:()=>R(),children:b("users.sudoers.alert_dialog.confirm")})]})]})]})]})})]})}function E(){let e=(0,l.useRouter)(),{toast:s}=(0,N.p)(),t=(0,w.q)(),{t:a}=(0,u.$G)("servers"),h=f.Ry({name:f.Z_().min(2,{message:a("users.sudoers.form_message.min")}).max(50,{message:a("users.sudoers.form_message.max")})}),p=(0,d.cI)({resolver:(0,i.F)(h),defaultValues:{name:""}}),[g,v]=(0,o.useState)(!1);return(0,r.jsxs)(j.Vq,{onOpenChange:e=>v(e),open:g,children:[(0,r.jsx)(j.hg,{asChild:!0,children:(0,r.jsxs)(x.z,{variant:"outline",size:"sm",className:"ml-auto h-8 lg:flex",children:[(0,r.jsx)(c.Z,{className:"mr-2 size-4"}),a("users.sudoers.dialog.add_btn")]})}),(0,r.jsxs)(j.cZ,{className:"sm:max-w-[525px]",children:[(0,r.jsxs)(j.fK,{children:[(0,r.jsx)(j.$N,{children:a("users.sudoers.dialog.title")}),(0,r.jsx)(j.Be,{children:a("users.sudoers.dialog.description")})]}),(0,r.jsx)(m.l0,{...p,children:(0,r.jsxs)("form",{onSubmit:p.handleSubmit(r=>{n.dJ.post("/servers/".concat(e.query.server_id,"/users/sudoers"),r).then(e=>{200===e.status?(s({title:a("users.sudoers.toasts.add.success.title"),description:a("users.sudoers.toasts.add.success.description")}),t.emit("REFETCH_SUDOERS"),v(!1),p.reset()):s({title:a("users.sudoers.toasts.add.fail.title"),description:a("users.sudoers.toasts.add.fail.description"),variant:"destructive"})}).catch(e=>{(0,k.FB)(e,p)||s({title:a("users.sudoers.toasts.add.fail.title"),description:a("users.sudoers.toasts.add.fail.description"),variant:"destructive"})})}),className:"space-y-5",children:[(0,r.jsx)(m.Wi,{control:p.control,name:"name",render:e=>{let{field:s}=e;return(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(y._,{htmlFor:"name",className:"text-right",children:a("users.sudoers.dialog.form.username")}),(0,r.jsxs)("div",{className:"col-span-3",children:[(0,r.jsx)(b.I,{id:"name",...s}),(0,r.jsx)(m.zG,{className:"mt-1"})]})]})}}),(0,r.jsx)(j.cN,{children:(0,r.jsxs)(x.z,{type:"submit",children:[(0,r.jsx)(c.Z,{className:"mr-2 size-4"}),a("users.sudoers.dialog.form.create_btn")]})})]})})]})]})}},6069:function(e,s,t){"use strict";t.d(s,{fC:function(){return N},z$:function(){return w}});var r=t(7462),n=t(7294),i=t(8771),a=t(5360),c=t(6206),l=t(7342),o=t(7898),d=t(7546),u=t(9115),f=t(5320);let m="Checkbox",[h,x]=(0,a.b)(m),[p,g]=h(m),v=(0,n.forwardRef)((e,s)=>{let{__scopeCheckbox:t,name:a,checked:o,defaultChecked:d,required:u,disabled:m,value:h="on",onCheckedChange:x,...g}=e,[v,j]=(0,n.useState)(null),N=(0,i.e)(s,e=>j(e)),w=(0,n.useRef)(!1),k=!v||!!v.closest("form"),[C=!1,E]=(0,l.T)({prop:o,defaultProp:d,onChange:x}),R=(0,n.useRef)(C);return(0,n.useEffect)(()=>{let e=null==v?void 0:v.form;if(e){let s=()=>E(R.current);return e.addEventListener("reset",s),()=>e.removeEventListener("reset",s)}},[v,E]),(0,n.createElement)(p,{scope:t,state:C,disabled:m},(0,n.createElement)(f.WV.button,(0,r.Z)({type:"button",role:"checkbox","aria-checked":y(C)?"mixed":C,"aria-required":u,"data-state":_(C),"data-disabled":m?"":void 0,disabled:m,value:h},g,{ref:N,onKeyDown:(0,c.M)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,c.M)(e.onClick,e=>{E(e=>!!y(e)||!e),k&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})})),k&&(0,n.createElement)(b,{control:v,bubbles:!w.current,name:a,value:h,checked:C,required:u,disabled:m,style:{transform:"translateX(-100%)"}}))}),j=(0,n.forwardRef)((e,s)=>{let{__scopeCheckbox:t,forceMount:i,...a}=e,c=g("CheckboxIndicator",t);return(0,n.createElement)(u.z,{present:i||y(c.state)||!0===c.state},(0,n.createElement)(f.WV.span,(0,r.Z)({"data-state":_(c.state),"data-disabled":c.disabled?"":void 0},a,{ref:s,style:{pointerEvents:"none",...e.style}})))}),b=e=>{let{control:s,checked:t,bubbles:i=!0,...a}=e,c=(0,n.useRef)(null),l=(0,o.D)(t),u=(0,d.t)(s);return(0,n.useEffect)(()=>{let e=c.current,s=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(l!==t&&s){let r=new Event("click",{bubbles:i});e.indeterminate=y(t),s.call(e,!y(t)&&t),e.dispatchEvent(r)}},[l,t,i]),(0,n.createElement)("input",(0,r.Z)({type:"checkbox","aria-hidden":!0,defaultChecked:!y(t)&&t},a,{tabIndex:-1,ref:c,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function y(e){return"indeterminate"===e}function _(e){return y(e)?"indeterminate":e?"checked":"unchecked"}let N=v,w=j},9391:function(e,s,t){"use strict";function r(e){return{all:e=e||new Map,on:function(s,t){var r=e.get(s);r?r.push(t):e.set(s,[t])},off:function(s,t){var r=e.get(s);r&&(t?r.splice(r.indexOf(t)>>>0,1):e.set(s,[]))},emit:function(s,t){var r=e.get(s);r&&r.slice().map(function(e){e(t)}),(r=e.get("*"))&&r.slice().map(function(e){e(s,t)})}}}t.d(s,{Z:function(){return r}})}},function(e){e.O(0,[5059,3265,3051,5855,2888,9774,179],function(){return e(e.s=1720)}),_N_E=e.O()}]);